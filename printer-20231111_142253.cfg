# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 80.8
shaper_type_x: mzv
shaper_freq_y: 79.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.051647, -0.048292, -0.042544, -0.036976, -0.030314, -0.026940, -0.030486, -0.037962, -0.045259, -0.051364, -0.057670, -0.063520, -0.069205, -0.070007, -0.070069, -0.070444, -0.066348, -0.063799, -0.063521, -0.064313, -0.062803, -0.060571, -0.056831, -0.050907, -0.045321
#*# 	  -0.044843, -0.040973, -0.034296, -0.027085, -0.019227, -0.024221, -0.018172, -0.016916, -0.033993, -0.041210, -0.048249, -0.054593, -0.058702, -0.062221, -0.064412, -0.061758, -0.057475, -0.055391, -0.055044, -0.054129, -0.054429, -0.052073, -0.055276, -0.042297, -0.031397
#*# 	  -0.035021, -0.032557, -0.026648, -0.018418, -0.011349, -0.006275, -0.009475, -0.016805, -0.024559, -0.031718, -0.038947, -0.044417, -0.050432, -0.053857, -0.055285, -0.053010, -0.049387, -0.047439, -0.047198, -0.046522, -0.046519, -0.044641, -0.042533, -0.038074, -0.029841
#*# 	  -0.032694, -0.030918, -0.025697, -0.018278, -0.009761, -0.006368, -0.008555, -0.015013, -0.020860, -0.026657, -0.033762, -0.041060, -0.057736, -0.049623, -0.041749, -0.049604, -0.045951, -0.044464, -0.043634, -0.042046, -0.042828, -0.040714, -0.040815, -0.032066, -0.022676
#*# 	  -0.025765, -0.024409, -0.021480, -0.017578, -0.012079, -0.009304, -0.010570, -0.014476, -0.019119, -0.023140, -0.029629, -0.036454, -0.042720, -0.048005, -0.049732, -0.047698, -0.043827, -0.041305, -0.040353, -0.041046, -0.041130, -0.041033, -0.039553, -0.036061, -0.029792
#*# 	  -0.029873, -0.027564, -0.034140, -0.020046, -0.005199, -0.015115, -0.015631, -0.018501, -0.020971, -0.023272, -0.029742, -0.035854, -0.042464, -0.047046, -0.049544, -0.048211, -0.044035, -0.041868, -0.039559, -0.051793, -0.040617, -0.028586, -0.039569, -0.032496, -0.024784
#*# 	  -0.024555, -0.024234, -0.022091, -0.019677, -0.018652, -0.015983, -0.016023, -0.018819, -0.019971, -0.021007, -0.027111, -0.032352, -0.037566, -0.043136, -0.045957, -0.044152, -0.041729, -0.038977, -0.037518, -0.039570, -0.040396, -0.040527, -0.040040, -0.035204, -0.029646
#*# 	  -0.015616, -0.024834, -0.023565, -0.019303, -0.018377, -0.016646, -0.015359, -0.017179, -0.018790, -0.035079, -0.023567, -0.012733, -0.031716, -0.035457, -0.039653, -0.039181, -0.036051, -0.033067, -0.032734, -0.033555, -0.033774, -0.033437, -0.034949, -0.028648, -0.017046
#*# 	  -0.021969, -0.023380, -0.021774, -0.019833, -0.016725, -0.014405, -0.013469, -0.015504, -0.018098, -0.018423, -0.021691, -0.024944, -0.027641, -0.030040, -0.033646, -0.032237, -0.030128, -0.028929, -0.029653, -0.031747, -0.033487, -0.029285, -0.032417, -0.028480, -0.023516
#*# 	  -0.021508, -0.020739, -0.019231, -0.015128, -0.011791, -0.010459, -0.009730, -0.012034, -0.015366, -0.016638, -0.019412, -0.022432, -0.023536, -0.026113, -0.028224, -0.013821, -0.026339, -0.025480, -0.027185, -0.028314, -0.026687, -0.025410, -0.025200, -0.020869, -0.010227
#*# 	  -0.017161, -0.016465, -0.013667, -0.010403, -0.007154, -0.005286, -0.003394, -0.006498, -0.010141, -0.012183, -0.014674, -0.018414, -0.020255, -0.020193, -0.025808, -0.024261, -0.020016, -0.020398, -0.022209, -0.023521, -0.022375, -0.019094, -0.020836, -0.018836, -0.010022
#*# 	  -0.012402, -0.012386, -0.007502, -0.015942, -0.001199, 0.014801, 0.003518, 0.001346, -0.001436, -0.004729, -0.008640, -0.012821, -0.015595, -0.018540, -0.021326, -0.020060, -0.018582, -0.015952, -0.016488, -0.018217, -0.026168, -0.013572, -0.004077, -0.004875, 0.004717
#*# 	  -0.014345, -0.011706, -0.006075, -0.004731, -0.001433, 0.000813, 0.004067, -0.001358, -0.000197, 0.000416, -0.006695, -0.009822, -0.012361, -0.017567, -0.020905, -0.018651, -0.015745, -0.013888, -0.014056, -0.014591, -0.012704, -0.012261, -0.011362, -0.005953, 0.001647
#*# 	  -0.010838, -0.005935, -0.000848, 0.001741, 0.004003, 0.006347, 0.008254, 0.006947, 0.006460, 0.004590, -0.013771, -0.002120, 0.009779, -0.009666, -0.013874, -0.012784, -0.009728, -0.006662, -0.007496, -0.007681, -0.008451, -0.006838, -0.004833, 0.001139, 0.011134
#*# 	  -0.010484, -0.006946, -0.002887, -0.000045, 0.002199, 0.003766, 0.005516, 0.004668, 0.004182, 0.005398, 0.000890, -0.001807, -0.004964, -0.009417, -0.011648, -0.010404, -0.008268, -0.008998, -0.005977, -0.004571, -0.006824, -0.005976, -0.004225, 0.003520, 0.005541
#*# 	  -0.008804, -0.005893, 0.007677, 0.001927, 0.004747, 0.006963, 0.006819, 0.006345, 0.005826, 0.006083, 0.003414, 0.000204, -0.003240, -0.006819, -0.010123, -0.008767, -0.005101, -0.013709, -0.002449, 0.007137, -0.005131, -0.003900, -0.003840, 0.004005, 0.014197
#*# 	  -0.014222, -0.012982, -0.008844, -0.005645, -0.004237, -0.003412, -0.002724, -0.004190, -0.004623, -0.003784, -0.009719, -0.010507, -0.010186, -0.017290, -0.019842, -0.016224, -0.012298, -0.009670, -0.009936, -0.011848, -0.012515, -0.010645, -0.008783, -0.004288, 0.001345
#*# 	  -0.021244, -0.018567, -0.013284, -0.009322, -0.007705, -0.006703, -0.005976, -0.019650, -0.006659, 0.006349, -0.010712, -0.014399, -0.017565, -0.020520, -0.022682, -0.019421, -0.012815, -0.009684, -0.009853, -0.012394, -0.014086, -0.011734, -0.010074, -0.006216, 0.006109
#*# 	  -0.029122, -0.026039, -0.023170, -0.021094, -0.017801, -0.014031, -0.015503, -0.017045, -0.017604, -0.018640, -0.021651, -0.025030, -0.027979, -0.029762, -0.029799, -0.026587, -0.021716, -0.017848, -0.018883, -0.020151, -0.024847, -0.020330, -0.017656, -0.012289, -0.003978
#*# 	  -0.036545, -0.032949, -0.028858, -0.025523, -0.023571, -0.021714, -0.021233, -0.023029, -0.023745, -0.024441, -0.027653, -0.030344, -0.032214, -0.034296, -0.047919, -0.031676, -0.014605, -0.022366, -0.022376, -0.024329, -0.024633, -0.024175, -0.022922, -0.016799, -0.003468
#*# 	  -0.043863, -0.038773, -0.036533, -0.033323, -0.031594, -0.029563, -0.028457, -0.029892, -0.030884, -0.032600, -0.036267, -0.038365, -0.039222, -0.047276, -0.041565, -0.032025, -0.038045, -0.028459, -0.022642, -0.030395, -0.028985, -0.028405, -0.027179, -0.020264, -0.008875
#*# 	  -0.044186, -0.040368, -0.038187, -0.027535, -0.043449, -0.032892, -0.032111, -0.033435, -0.034301, -0.035663, -0.039439, -0.041974, -0.042558, -0.045420, -0.046460, -0.042510, -0.037012, -0.033089, -0.040641, -0.031901, -0.023486, -0.029259, -0.028456, -0.021116, -0.008109
#*# 	  -0.056196, -0.050414, -0.048426, -0.045626, -0.044200, -0.042760, -0.041662, -0.041982, -0.034124, -0.051282, -0.046102, -0.037937, -0.049321, -0.052206, -0.052639, -0.048689, -0.042826, -0.039160, -0.038252, -0.036876, -0.033826, -0.033122, -0.031104, -0.023192, -0.007988
#*# 	  -0.056243, -0.048095, -0.050337, -0.049296, -0.047529, -0.046342, -0.044926, -0.043941, -0.052031, -0.044183, -0.043970, -0.052905, -0.052685, -0.054489, -0.055904, -0.051109, -0.044769, -0.041285, -0.038856, -0.037587, -0.034862, -0.032584, -0.030002, -0.023964, -0.011348
#*# 	  -0.070270, -0.067859, -0.068705, -0.063644, -0.057798, -0.060606, -0.058529, -0.054720, -0.052636, -0.053831, -0.059994, -0.065421, -0.066733, -0.069625, -0.070863, -0.065841, -0.059904, -0.055054, -0.051790, -0.054455, -0.046456, -0.041112, -0.040079, -0.025896, -0.019855
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	  1.7354079221972734,
#*# 	  0.7630322078872325,
#*# 	  0.3972884925633777,
#*# 	  0.37849463200726147,
#*# 	  0.3169570227532607,
#*# 	  -0.2360704257340257,
#*# 	  -0.2840356980838786,
#*# 	  0.2759119913545306,
#*# 	  0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = 0.00000
