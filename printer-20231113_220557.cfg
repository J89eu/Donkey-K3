# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 79.8
shaper_type_x: mzv
shaper_freq_y: 80.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.085103, -0.078285, -0.070464, -0.063219, -0.055041, -0.050189, -0.050635, -0.060225, -0.061959, -0.066261, -0.074118, -0.070606, -0.077438, -0.083555, -0.080065, -0.080425, -0.077968, -0.075523, -0.078130, -0.079161, -0.080611, -0.082733, -0.083241, -0.082286, -0.078771
#*# 	  -0.077888, -0.069234, -0.066384, -0.049142, -0.042607, -0.045289, -0.029245, -0.046702, -0.053441, -0.046716, -0.073976, -0.066666, -0.070262, -0.084495, -0.064904, -0.071871, -0.078199, -0.058593, -0.068912, -0.076533, -0.064581, -0.073183, -0.075975, -0.068090, -0.066209
#*# 	  -0.073020, -0.060991, -0.058424, -0.045914, -0.035794, -0.030260, -0.032826, -0.039459, -0.045485, -0.052163, -0.053880, -0.059757, -0.066274, -0.065991, -0.068359, -0.066104, -0.061838, -0.060037, -0.060315, -0.061780, -0.064247, -0.068898, -0.070940, -0.070386, -0.066972
#*# 	  -0.066915, -0.053451, -0.051010, -0.048393, -0.028283, -0.028047, -0.042029, -0.024986, -0.041847, -0.045623, -0.037645, -0.068498, -0.060031, -0.064025, -0.077675, -0.050617, -0.058643, -0.067277, -0.045766, -0.056516, -0.063333, -0.054520, -0.057486, -0.057761, -0.054522
#*# 	  -0.064068, -0.054466, -0.048462, -0.043354, -0.036487, -0.033447, -0.032620, -0.031817, -0.041766, -0.037404, -0.046476, -0.054962, -0.050744, -0.060074, -0.065204, -0.056894, -0.056437, -0.056578, -0.049759, -0.052873, -0.053662, -0.056701, -0.059711, -0.060838, -0.055985
#*# 	  -0.062357, -0.056971, -0.044207, -0.044712, -0.045529, -0.030605, -0.033966, -0.044807, -0.026927, -0.050195, -0.043578, -0.048622, -0.065684, -0.047391, -0.060853, -0.069399, -0.044570, -0.052427, -0.061468, -0.043127, -0.050635, -0.050247, -0.050713, -0.054644, -0.049066
#*# 	  -0.063869, -0.053499, -0.048763, -0.045631, -0.042291, -0.038280, -0.033423, -0.038415, -0.034830, -0.035699, -0.046383, -0.040486, -0.049947, -0.060530, -0.052522, -0.055177, -0.055401, -0.043378, -0.047413, -0.048693, -0.049942, -0.049553, -0.051732, -0.052310, -0.049420
#*# 	  -0.060134, -0.053165, -0.053683, -0.042248, -0.041018, -0.044449, -0.026346, -0.034456, -0.033283, -0.022885, -0.047815, -0.039502, -0.043195, -0.059042, -0.040958, -0.049821, -0.057180, -0.033733, -0.043786, -0.048672, -0.037563, -0.039154, -0.040262, -0.043755, -0.041368
#*# 	  -0.058561, -0.049085, -0.046089, -0.044219, -0.036876, -0.029422, -0.035082, -0.031074, -0.028904, -0.034891, -0.023664, -0.031561, -0.040317, -0.033337, -0.042014, -0.044107, -0.031137, -0.037253, -0.041654, -0.032334, -0.037405, -0.034442, -0.035354, -0.036506, -0.032240
#*# 	  -0.052869, -0.045468, -0.043149, -0.046334, -0.026446, -0.030365, -0.038815, -0.019525, -0.027821, -0.026269, -0.014723, -0.037939, -0.028552, -0.032629, -0.045125, -0.021146, -0.030010, -0.042396, -0.018156, -0.032905, -0.031422, -0.025930, -0.026419, -0.026947, -0.025765
#*# 	  -0.048578, -0.039249, -0.037214, -0.031952, -0.023807, -0.028448, -0.023959, -0.025528, -0.029068, -0.015050, -0.022870, -0.031098, -0.015872, -0.025231, -0.034410, -0.018479, -0.023170, -0.033843, -0.018666, -0.026058, -0.019079, -0.019791, -0.021272, -0.022311, -0.019102
#*# 	  -0.042728, -0.038658, -0.026642, -0.030860, -0.030719, -0.010467, -0.018696, -0.029961, -0.010548, -0.017481, -0.019217, -0.007978, -0.029957, -0.022858, -0.023739, -0.031492, -0.008726, -0.021340, -0.035479, -0.010555, -0.015348, -0.011315, -0.012617, -0.013584, -0.006648
#*# 	  -0.042599, -0.032632, -0.028311, -0.024544, -0.023836, -0.016459, -0.015628, -0.021579, -0.008594, -0.015360, -0.025172, -0.008267, -0.017692, -0.028352, -0.014684, -0.020783, -0.023016, -0.009669, -0.021068, -0.017145, -0.007723, -0.005778, -0.007507, -0.007108, -0.004149
#*# 	  -0.042187, -0.033648, -0.032886, -0.024546, -0.021705, -0.023465, -0.006167, -0.013751, -0.012076, -0.000672, -0.010793, -0.011700, -0.003773, -0.025834, -0.017990, -0.016203, -0.021470, -0.004105, -0.017135, -0.022038, -0.007051, -0.002905, 0.000931, 0.000403, 0.004900
#*# 	  -0.046173, -0.034612, -0.030814, -0.027305, -0.020543, -0.016456, -0.017730, -0.008996, -0.009511, -0.013180, -0.004967, -0.009932, -0.015517, -0.009308, -0.016374, -0.017996, -0.009549, -0.012092, -0.014484, -0.004931, -0.007516, -0.005458, -0.005167, -0.005500, -0.003155
#*# 	  -0.048568, -0.036686, -0.032235, -0.033253, -0.023042, -0.020448, -0.024689, -0.009147, -0.011366, -0.008579, -0.000659, -0.019262, -0.012420, -0.006832, -0.027068, -0.007035, -0.013831, -0.023555, -0.002988, -0.011480, -0.012431, -0.001848, -0.001597, -0.000898, 0.001809
#*# 	  -0.059236, -0.046007, -0.041262, -0.036624, -0.029681, -0.028216, -0.023471, -0.021282, -0.020436, -0.012356, -0.017131, -0.022046, -0.015699, -0.022390, -0.026183, -0.017582, -0.018262, -0.025952, -0.012143, -0.020813, -0.014846, -0.012763, -0.013158, -0.013266, -0.009865
#*# 	  -0.063860, -0.056943, -0.047405, -0.046775, -0.042582, -0.028745, -0.031418, -0.034218, -0.017959, -0.023416, -0.024506, -0.017308, -0.035756, -0.031252, -0.032193, -0.035039, -0.014176, -0.021701, -0.031048, -0.013900, -0.020776, -0.023524, -0.014509, -0.013436, -0.009192
#*# 	  -0.077112, -0.065102, -0.059327, -0.053563, -0.048029, -0.042146, -0.039058, -0.039913, -0.029328, -0.032186, -0.038526, -0.030920, -0.037335, -0.042214, -0.033529, -0.033163, -0.032885, -0.022189, -0.028926, -0.027580, -0.024521, -0.024398, -0.024821, -0.024437, -0.020069
#*# 	  -0.080960, -0.071542, -0.067431, -0.061980, -0.054140, -0.053492, -0.041121, -0.043910, -0.047652, -0.031630, -0.040659, -0.042345, -0.036389, -0.056149, -0.045904, -0.041518, -0.044485, -0.022464, -0.032696, -0.037006, -0.025832, -0.028719, -0.024599, -0.023333, -0.017523
#*# 	  -0.088456, -0.078439, -0.073039, -0.067944, -0.062021, -0.056808, -0.055610, -0.047992, -0.047981, -0.050956, -0.045442, -0.050200, -0.055948, -0.049052, -0.053565, -0.053348, -0.037706, -0.041209, -0.040164, -0.033785, -0.037557, -0.034661, -0.033765, -0.032338, -0.028832
#*# 	  -0.087472, -0.077624, -0.076895, -0.074170, -0.064904, -0.061517, -0.063405, -0.051073, -0.053234, -0.059261, -0.047542, -0.056665, -0.057655, -0.050540, -0.067547, -0.055621, -0.052003, -0.055413, -0.035958, -0.041667, -0.041268, -0.035420, -0.033732, -0.030860, -0.026012
#*# 	  -0.093193, -0.086721, -0.083939, -0.078859, -0.073220, -0.070597, -0.061624, -0.062572, -0.064332, -0.054841, -0.062084, -0.068804, -0.059674, -0.067214, -0.073591, -0.057915, -0.060651, -0.057135, -0.047533, -0.054101, -0.044773, -0.042982, -0.041951, -0.040208, -0.034071
#*# 	  -0.098020, -0.095253, -0.091367, -0.089437, -0.083858, -0.075595, -0.074427, -0.076127, -0.065374, -0.068187, -0.076368, -0.067332, -0.074604, -0.076608, -0.070591, -0.078200, -0.068720, -0.065528, -0.068495, -0.053991, -0.052589, -0.052587, -0.047485, -0.044600, -0.039292
#*# 	  -0.111549, -0.108631, -0.105893, -0.102232, -0.097945, -0.088266, -0.089177, -0.089601, -0.079966, -0.082856, -0.088544, -0.079961, -0.088128, -0.097069, -0.084883, -0.086247, -0.081310, -0.069061, -0.078721, -0.069366, -0.066247, -0.069959, -0.057269, -0.052015, -0.035650
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	  1.7354079221972734,
#*# 	  0.7630322078872325,
#*# 	  0.3972884925633777,
#*# 	  0.37849463200726147,
#*# 	  0.3169570227532607,
#*# 	  -0.2360704257340257,
#*# 	  -0.2840356980838786,
#*# 	  0.2759119913545306,
#*# 	  0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = -0.38000
