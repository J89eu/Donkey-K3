# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 70.8
shaper_type_x: mzv
shaper_freq_y: 83.6
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 125
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.030122, -0.032519, -0.028045, -0.026276, -0.024821, -0.019461, -0.023496, -0.028724, -0.026240, -0.031510, -0.037862, -0.037873, -0.043365, -0.047473, -0.046626, -0.047544, -0.040773, -0.036581, -0.036579, -0.034332, -0.035698, -0.032288, -0.030554, -0.023831, -0.014008
#*# 	  -0.026863, -0.022404, -0.020317, -0.017608, -0.012798, -0.012064, -0.013136, -0.014379, -0.018830, -0.025612, -0.026995, -0.032216, -0.036604, -0.039059, -0.043807, -0.038247, -0.034357, -0.032771, -0.026374, -0.027588, -0.029244, -0.024834, -0.023110, -0.017569, -0.009041
#*# 	  -0.020541, -0.013975, -0.012674, -0.012802, -0.010292, -0.010126, -0.009958, -0.010734, -0.013270, -0.014408, -0.020371, -0.021763, -0.029262, -0.033587, -0.034371, -0.030840, -0.025528, -0.021745, -0.020125, -0.021176, -0.016204, -0.016696, -0.013467, -0.012986, -0.001798
#*# 	  -0.013929, -0.011693, -0.011981, -0.012174, -0.005263, -0.003700, -0.006473, -0.005345, -0.013024, -0.011962, -0.012740, -0.022004, -0.023169, -0.029914, -0.033349, -0.024941, -0.022736, -0.023447, -0.011189, -0.013468, -0.015191, -0.011539, -0.012033, -0.009728, -0.000059
#*# 	  -0.012029, -0.011178, -0.010342, -0.007316, -0.002243, -0.000674, -0.000686, -0.002563, -0.006265, -0.009877, -0.010484, -0.013890, -0.020601, -0.025955, -0.028295, -0.025145, -0.018884, -0.014214, -0.013510, -0.013535, -0.013778, -0.013398, -0.012215, -0.013026, 0.000628
#*# 	  -0.012562, -0.010775, -0.012914, -0.009055, -0.004635, -0.003934, 0.000266, -0.003358, -0.008719, -0.007100, -0.011831, -0.016763, -0.016590, -0.026029, -0.031539, -0.022688, -0.020106, -0.016091, -0.011168, -0.014429, -0.013467, -0.012551, -0.011258, -0.010617, 0.000817
#*# 	  -0.013748, -0.012272, -0.011072, -0.011380, -0.007426, -0.004540, -0.004524, -0.005756, -0.006096, -0.010830, -0.012128, -0.013586, -0.022722, -0.028409, -0.031381, -0.029512, -0.025638, -0.019897, -0.014154, -0.014112, -0.015384, -0.013671, -0.012704, -0.012479, -0.001264
#*# 	  -0.012285, -0.011858, -0.013179, -0.011058, -0.010085, -0.008079, -0.000319, -0.004969, -0.011241, -0.005523, -0.011900, -0.014058, -0.014558, -0.026940, -0.028203, -0.025478, -0.023838, -0.014846, -0.014073, -0.014191, -0.011252, -0.013343, -0.011983, -0.010301, 0.002885
#*# 	  -0.013491, -0.013127, -0.012022, -0.011285, -0.012025, -0.004395, -0.004061, -0.006827, -0.009345, -0.011035, -0.011863, -0.011045, -0.013659, -0.018583, -0.022212, -0.021104, -0.017072, -0.013388, -0.013164, -0.013344, -0.014529, -0.013293, -0.011668, -0.005973, 0.003400
#*# 	  -0.011015, -0.011799, -0.012403, -0.009860, -0.006801, -0.002840, 0.001929, -0.010176, -0.006540, -0.008004, -0.012324, -0.009631, -0.012370, -0.012548, -0.011050, -0.012566, -0.012325, -0.010759, -0.012025, -0.012073, -0.009698, -0.010103, -0.006593, -0.003280, 0.010685
#*# 	  -0.010455, -0.005986, -0.006174, -0.005089, -0.001888, 0.002270, 0.001218, -0.000014, -0.003721, -0.006779, -0.005994, -0.009779, -0.011007, -0.012312, -0.010886, -0.011840, -0.010335, -0.008776, -0.008720, -0.007348, -0.007631, -0.002126, -0.002347, 0.000085, 0.020038
#*# 	  -0.006036, -0.001068, -0.002475, -0.000084, 0.003276, 0.008243, 0.007055, 0.000692, 0.007359, 0.000487, -0.004734, -0.001183, -0.008931, -0.012139, -0.010013, -0.006870, -0.005340, -0.000601, -0.001157, 0.000753, 0.000474, 0.002374, 0.008649, 0.009630, 0.027430
#*# 	  -0.003200, 0.003072, 0.002268, 0.003081, 0.006492, 0.011520, 0.012259, 0.010483, 0.006602, 0.003468, 0.002313, -0.001522, -0.005213, -0.005244, -0.010432, -0.005750, -0.002330, 0.000516, 0.001205, 0.004135, 0.002819, 0.008847, 0.009307, 0.012144, 0.033828
#*# 	  -0.001582, 0.003216, 0.005351, 0.004524, 0.006572, 0.013539, 0.013531, 0.008945, 0.014550, 0.007948, 0.006052, 0.005900, -0.002912, -0.001008, -0.007659, -0.009659, 0.000511, 0.003994, 0.006156, 0.008614, 0.004530, 0.003995, 0.012518, 0.014752, 0.034037
#*# 	  -0.001918, 0.005610, 0.006784, 0.008639, 0.008633, 0.019752, 0.016051, 0.015821, 0.018070, 0.009775, 0.011171, 0.010828, 0.004235, 0.006875, -0.000475, -0.000719, 0.006058, 0.007152, 0.010967, 0.011754, 0.007378, 0.011136, 0.016674, 0.020069, 0.036887
#*# 	  -0.003358, 0.000647, 0.002987, 0.004489, 0.006858, 0.013219, 0.007856, 0.012317, 0.012506, 0.009528, 0.013331, 0.008479, 0.001366, 0.005031, -0.002402, -0.004302, 0.002978, 0.003532, 0.006994, 0.007486, 0.005624, 0.004381, 0.013844, 0.016585, 0.033007
#*# 	  -0.009974, -0.003060, 0.002153, 0.002994, 0.001207, 0.014371, 0.009188, 0.003296, 0.013097, 0.008376, 0.001785, 0.009629, -0.001283, -0.003359, -0.002443, -0.007808, -0.000635, 0.001063, 0.000091, 0.006797, -0.000530, -0.001603, 0.010723, 0.014221, 0.027614
#*# 	  -0.012300, -0.012288, -0.010678, -0.009423, 0.000194, 0.000630, -0.003663, 0.004237, 0.001069, -0.002533, 0.002228, -0.005988, -0.008572, -0.008757, -0.012445, -0.011215, -0.007032, -0.006623, -0.003393, -0.002851, -0.008346, -0.000025, -0.001150, 0.003850, 0.019764
#*# 	  -0.019166, -0.012377, -0.011211, -0.011297, -0.011516, -0.003044, -0.003864, -0.011518, 0.001550, -0.006469, -0.010679, -0.006217, -0.012668, -0.014202, -0.013240, -0.012727, -0.011120, -0.006439, -0.007664, -0.008483, -0.007012, -0.009820, -0.000798, 0.004251, 0.020119
#*# 	  -0.024672, -0.018583, -0.018007, -0.014693, -0.012103, -0.012019, -0.012160, -0.008341, -0.012209, -0.011953, -0.011828, -0.016829, -0.016069, -0.018851, -0.026538, -0.015230, -0.012251, -0.012607, -0.012243, -0.012402, -0.018222, -0.011583, -0.011298, -0.003144, 0.016166
#*# 	  -0.030027, -0.021981, -0.024369, -0.013206, -0.015923, -0.013005, -0.004727, -0.010657, -0.010404, -0.012496, -0.017798, -0.017742, -0.020389, -0.026043, -0.023320, -0.023564, -0.019081, -0.012618, -0.015712, -0.019973, -0.012385, -0.014853, -0.010541, -0.002185, 0.014608
#*# 	  -0.030425, -0.019275, -0.023475, -0.022724, -0.017730, -0.018222, -0.012139, -0.015623, -0.015112, -0.012250, -0.017793, -0.023652, -0.023033, -0.027877, -0.033865, -0.027918, -0.024528, -0.021799, -0.014727, -0.021267, -0.018738, -0.012083, -0.011808, -0.004792, 0.010843
#*# 	  -0.034655, -0.026440, -0.027385, -0.025086, -0.022196, -0.020157, -0.015287, -0.016997, -0.021177, -0.017404, -0.022842, -0.029183, -0.029452, -0.033680, -0.037782, -0.035673, -0.029550, -0.027677, -0.023951, -0.028048, -0.012341, -0.014599, -0.012503, -0.007150, 0.008630
#*# 	  -0.039130, -0.033315, -0.034363, -0.034297, -0.031737, -0.030646, -0.020930, -0.024991, -0.027621, -0.023345, -0.029743, -0.034230, -0.034776, -0.043490, -0.043517, -0.038813, -0.039781, -0.029112, -0.030879, -0.031960, -0.015008, -0.014336, -0.012854, -0.011248, 0.004261
#*# 	  -0.048804, -0.042967, -0.043423, -0.044614, -0.041930, -0.039591, -0.037481, -0.035125, -0.039277, -0.036487, -0.040947, -0.044655, -0.047534, -0.051556, -0.054531, -0.047740, -0.045470, -0.044036, -0.033742, -0.032989, -0.029513, -0.022231, -0.023234, -0.011488, -0.002743
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3856315955046634,
#*# 	  1.704784316189037,
#*# 	  0.7555972902416769,
#*# 	  0.36667543624615445,
#*# 	  0.434303362806249,
#*# 	  0.4349327754326395,
#*# 	  -0.2874792938435709,
#*# 	  -0.38445860153829553,
#*# 	  0.31308406285770046,
#*# 	  0.2807313674313839
#*# model_domain = 3.1061274065710475e-07,3.327710933345885e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 71.318711
#*# model_offset = 0.01000
