[include moonraker_obico_macros.cfg]
# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 60000  
max_accel: 60000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 100

[input_shaper]
shaper_freq_x: 74.2
shaper_type_x: mzv
shaper_freq_y: 75.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.057669, -0.054543, -0.046274, -0.039092, -0.034051, -0.032711, -0.025359, -0.030117, -0.032089, -0.030573, -0.033576, -0.037198, -0.041620, -0.047228, -0.050674, -0.050285, -0.048842, -0.048879, -0.053258, -0.055994, -0.052743, -0.063458, -0.056805, -0.055238, -0.053424
#*# 	  -0.053386, -0.047924, -0.039225, -0.035658, -0.029109, -0.024258, -0.021661, -0.020813, -0.021578, -0.022815, -0.024720, -0.029868, -0.040739, -0.039974, -0.036577, -0.046930, -0.040742, -0.040715, -0.044949, -0.047927, -0.051914, -0.057165, -0.058186, -0.051876, -0.056839
#*# 	  -0.059159, -0.048661, -0.041871, -0.032125, -0.027188, -0.019801, -0.016966, -0.016854, -0.016508, -0.016423, -0.018606, -0.017136, -0.027329, -0.034236, -0.030080, -0.032504, -0.032297, -0.029418, -0.032197, -0.037687, -0.042877, -0.049893, -0.043145, -0.043702, -0.043047
#*# 	  -0.052341, -0.045552, -0.035588, -0.029289, -0.027895, -0.016808, -0.008503, -0.013855, -0.009101, -0.006903, -0.011985, -0.017938, -0.023238, -0.027373, -0.031435, -0.032255, -0.030291, -0.028868, -0.031369, -0.034996, -0.039316, -0.043479, -0.047883, -0.037540, -0.050070
#*# 	  -0.059072, -0.047135, -0.036123, -0.028042, -0.026445, -0.011650, -0.010132, -0.016810, -0.009004, -0.008716, -0.011430, -0.015374, -0.020938, -0.026440, -0.030224, -0.029687, -0.026978, -0.024761, -0.027664, -0.025830, -0.035219, -0.048097, -0.038377, -0.039045, -0.039807
#*# 	  -0.053285, -0.045421, -0.035885, -0.028967, -0.024036, -0.017361, -0.012199, -0.009000, -0.007597, -0.009310, -0.010944, -0.016667, -0.023192, -0.030446, -0.033599, -0.036154, -0.034142, -0.031428, -0.031978, -0.034625, -0.035182, -0.041522, -0.043603, -0.045799, -0.048771
#*# 	  -0.064748, -0.053527, -0.043519, -0.032967, -0.030058, -0.022052, -0.015131, -0.013618, -0.010764, -0.011963, -0.010408, -0.018314, -0.028020, -0.028904, -0.036048, -0.036918, -0.036093, -0.033397, -0.035156, -0.038017, -0.037283, -0.038544, -0.038132, -0.039670, -0.040520
#*# 	  -0.060768, -0.054550, -0.041846, -0.037035, -0.031700, -0.025625, -0.017300, -0.012970, -0.013672, -0.013952, -0.016638, -0.020198, -0.025461, -0.031834, -0.038263, -0.038454, -0.039601, -0.037125, -0.036857, -0.038761, -0.039451, -0.040725, -0.042308, -0.042654, -0.046468
#*# 	  -0.068889, -0.051514, -0.048745, -0.043502, -0.036422, -0.026104, -0.024484, -0.019019, -0.015590, -0.015504, -0.015679, -0.019815, -0.022866, -0.028779, -0.032888, -0.031312, -0.033889, -0.033050, -0.028926, -0.036036, -0.032866, -0.035264, -0.037266, -0.039116, -0.039554
#*# 	  -0.061156, -0.053302, -0.044187, -0.039066, -0.031630, -0.024688, -0.019814, -0.018237, -0.016467, -0.015818, -0.014695, -0.016945, -0.020186, -0.024259, -0.029934, -0.031180, -0.031130, -0.029141, -0.030870, -0.031269, -0.031912, -0.035030, -0.039041, -0.038772, -0.037215
#*# 	  -0.067849, -0.054767, -0.047403, -0.037026, -0.034270, -0.025931, -0.014570, -0.019512, -0.022028, -0.012761, -0.015659, -0.021081, -0.017505, -0.021726, -0.029205, -0.025936, -0.024932, -0.026721, -0.030349, -0.027818, -0.025307, -0.032612, -0.030487, -0.032631, -0.029103
#*# 	  -0.059146, -0.050761, -0.042282, -0.036163, -0.030066, -0.022032, -0.017455, -0.015604, -0.013739, -0.013147, -0.013139, -0.013896, -0.017434, -0.018917, -0.022164, -0.023469, -0.023006, -0.023124, -0.025738, -0.024913, -0.025167, -0.025769, -0.030405, -0.031312, -0.028076
#*# 	  -0.065621, -0.051481, -0.045143, -0.032788, -0.032388, -0.021271, -0.013155, -0.013244, -0.012342, -0.011540, -0.011849, -0.012466, -0.015386, -0.018814, -0.017347, -0.020679, -0.026620, -0.017524, -0.025764, -0.029366, -0.021156, -0.028373, -0.024404, -0.027289, -0.018919
#*# 	  -0.061602, -0.053416, -0.041812, -0.038184, -0.031679, -0.023515, -0.016746, -0.013361, -0.009025, -0.010575, -0.010465, -0.011815, -0.014081, -0.017108, -0.022204, -0.023091, -0.025158, -0.024953, -0.021392, -0.023805, -0.022039, -0.026626, -0.030559, -0.030262, -0.030189
#*# 	  -0.069780, -0.057485, -0.051295, -0.040663, -0.037373, -0.022941, -0.017873, -0.020904, -0.010027, -0.011025, -0.015651, -0.010550, -0.013717, -0.017988, -0.021613, -0.023895, -0.026036, -0.026662, -0.027854, -0.024820, -0.024579, -0.029991, -0.029066, -0.031260, -0.027635
#*# 	  -0.069699, -0.062697, -0.052044, -0.046422, -0.040438, -0.032543, -0.024736, -0.020825, -0.015602, -0.014396, -0.013952, -0.014898, -0.016339, -0.018743, -0.024222, -0.026610, -0.028970, -0.028034, -0.030090, -0.030347, -0.030614, -0.034641, -0.039131, -0.038436, -0.039770
#*# 	  -0.080984, -0.071035, -0.062366, -0.049973, -0.048032, -0.039469, -0.029474, -0.027792, -0.023148, -0.021509, -0.021410, -0.021783, -0.024426, -0.022961, -0.030013, -0.035891, -0.029636, -0.034124, -0.043385, -0.034760, -0.037412, -0.043485, -0.041276, -0.043070, -0.039325
#*# 	  -0.085528, -0.079229, -0.067984, -0.063551, -0.054387, -0.047911, -0.040740, -0.035235, -0.030687, -0.030130, -0.029779, -0.031982, -0.035030, -0.035997, -0.038173, -0.037671, -0.039427, -0.037634, -0.042437, -0.043390, -0.045906, -0.048291, -0.051631, -0.049862, -0.046147
#*# 	  -0.098036, -0.088673, -0.083141, -0.071151, -0.066135, -0.056421, -0.052193, -0.039896, -0.039744, -0.040775, -0.039921, -0.040513, -0.043905, -0.044639, -0.045136, -0.044495, -0.044926, -0.043985, -0.047572, -0.045165, -0.046809, -0.048216, -0.048347, -0.050675, -0.049608
#*# 	  -0.105397, -0.098104, -0.087762, -0.082589, -0.071647, -0.063261, -0.055201, -0.049098, -0.044021, -0.045091, -0.045789, -0.046344, -0.051081, -0.055465, -0.051530, -0.051257, -0.054251, -0.048300, -0.050687, -0.052946, -0.050943, -0.054867, -0.056057, -0.056058, -0.045727
#*# 	  -0.113200, -0.103413, -0.095419, -0.081623, -0.079491, -0.069140, -0.058601, -0.054650, -0.050148, -0.049870, -0.051477, -0.052749, -0.054404, -0.057607, -0.063847, -0.054640, -0.056811, -0.062057, -0.056641, -0.055235, -0.054628, -0.061443, -0.054925, -0.053944, -0.050566
#*# 	  -0.114434, -0.106786, -0.096737, -0.091647, -0.082189, -0.073526, -0.066249, -0.060806, -0.054377, -0.054099, -0.056204, -0.058089, -0.061429, -0.063121, -0.064762, -0.063931, -0.065004, -0.061034, -0.062726, -0.061417, -0.057156, -0.059743, -0.056650, -0.054804, -0.046798
#*# 	  -0.120642, -0.112728, -0.106456, -0.089786, -0.088207, -0.080752, -0.066132, -0.066652, -0.064040, -0.060618, -0.060940, -0.062591, -0.067257, -0.070389, -0.071072, -0.072410, -0.070938, -0.068173, -0.067402, -0.070366, -0.058198, -0.063249, -0.059407, -0.053961, -0.047852
#*# 	  -0.123453, -0.119061, -0.109769, -0.100571, -0.093903, -0.084996, -0.077514, -0.072824, -0.068152, -0.066529, -0.066415, -0.069763, -0.073536, -0.076003, -0.079379, -0.075370, -0.077228, -0.073519, -0.066375, -0.068805, -0.062331, -0.064281, -0.060328, -0.057034, -0.055209
#*# 	  -0.132585, -0.125802, -0.120503, -0.107559, -0.103007, -0.093468, -0.084172, -0.080565, -0.076003, -0.073900, -0.076500, -0.075216, -0.081308, -0.085048, -0.077225, -0.081580, -0.080206, -0.078869, -0.074951, -0.072535, -0.071762, -0.071095, -0.072306, -0.064433, -0.030478
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3856232970581277,
#*# 	  1.7043595232719484,
#*# 	  0.7482036273345796,
#*# 	  0.2921440097493287,
#*# 	  0.38485236488684393,
#*# 	  0.6916775148234287,
#*# 	  -0.15665704786161627,
#*# 	  -0.6858971426015216,
#*# 	  0.24449396338121415,
#*# 	  0.40598073634933096
#*# model_domain = 3.097766416886859e-07,3.3287737663318636e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 72.358329
#*# model_offset = 0.13000
