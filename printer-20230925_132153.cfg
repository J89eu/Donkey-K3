# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 113.2
shaper_type_x: mzv
shaper_freq_y: 115.2
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 120
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.059408, -0.065265, -0.073319, -0.067134, -0.054750, -0.068817, -0.061809, -0.054356, -0.072577, -0.068479, -0.072363, -0.077007, -0.073718, -0.090093, -0.085982, -0.078450, -0.083266, -0.076049, -0.073403, -0.079665, -0.076860, -0.072148, -0.071241, -0.070106, -0.059518
#*# 	  -0.065221, -0.060279, -0.059586, -0.056504, -0.053089, -0.049564, -0.054199, -0.053413, -0.053641, -0.060767, -0.060695, -0.070419, -0.072144, -0.072628, -0.076840, -0.072052, -0.068789, -0.065622, -0.065242, -0.066011, -0.066301, -0.064363, -0.065685, -0.060109, -0.048417
#*# 	  -0.060003, -0.052791, -0.048455, -0.050420, -0.044204, -0.047731, -0.043301, -0.041494, -0.050268, -0.049753, -0.050847, -0.063268, -0.064245, -0.063607, -0.069880, -0.064146, -0.057632, -0.059300, -0.055078, -0.054581, -0.055502, -0.054300, -0.054533, -0.050909, -0.036750
#*# 	  -0.053044, -0.047711, -0.045135, -0.041376, -0.040461, -0.037953, -0.033802, -0.033117, -0.042274, -0.039932, -0.040146, -0.054413, -0.055809, -0.055407, -0.063451, -0.056124, -0.052671, -0.048625, -0.047000, -0.049210, -0.047781, -0.047942, -0.049643, -0.044009, -0.031720
#*# 	  -0.053256, -0.041758, -0.039973, -0.040057, -0.037069, -0.033807, -0.031290, -0.033054, -0.032744, -0.034517, -0.039565, -0.046279, -0.050212, -0.054714, -0.056758, -0.052629, -0.048625, -0.045178, -0.043900, -0.044256, -0.044403, -0.046009, -0.046896, -0.042260, -0.029125
#*# 	  -0.045216, -0.040332, -0.041518, -0.038293, -0.033279, -0.030046, -0.025141, -0.032024, -0.026999, -0.023323, -0.038498, -0.039433, -0.041399, -0.054475, -0.053268, -0.049470, -0.046618, -0.042041, -0.038929, -0.042617, -0.041239, -0.038777, -0.041843, -0.034756, -0.025564
#*# 	  -0.043669, -0.036674, -0.036773, -0.037895, -0.033838, -0.031430, -0.026704, -0.026754, -0.025480, -0.027518, -0.033462, -0.037897, -0.042912, -0.047659, -0.051005, -0.047690, -0.043969, -0.039167, -0.037243, -0.037526, -0.036825, -0.037429, -0.039602, -0.035629, -0.021501
#*# 	  -0.036522, -0.030755, -0.033431, -0.032285, -0.026490, -0.024248, -0.018971, -0.021070, -0.017928, -0.018163, -0.028170, -0.029591, -0.036341, -0.037928, -0.039499, -0.037215, -0.035064, -0.030093, -0.027695, -0.025567, -0.025813, -0.024961, -0.029038, -0.022199, -0.010018
#*# 	  -0.032870, -0.029570, -0.029398, -0.032297, -0.022014, -0.020940, -0.015253, -0.013273, -0.011631, -0.013864, -0.015621, -0.018934, -0.023463, -0.026203, -0.028737, -0.030484, -0.022905, -0.021370, -0.019779, -0.021903, -0.022279, -0.021343, -0.022569, -0.020548, -0.008123
#*# 	  -0.032686, -0.026023, -0.028531, -0.026763, -0.024737, -0.018878, -0.017610, -0.014916, -0.011961, -0.018161, -0.015837, -0.015589, -0.021307, -0.022059, -0.022846, -0.019668, -0.016670, -0.013077, -0.012157, -0.009694, -0.009754, -0.007965, -0.008001, -0.012541, 0.007255
#*# 	  -0.022668, -0.018048, -0.017991, -0.017023, -0.017557, -0.009234, -0.008058, -0.007834, -0.006623, -0.007748, -0.007453, -0.007173, -0.008102, -0.009584, -0.009556, -0.010225, -0.004349, -0.001796, -0.007867, -0.006377, -0.005968, -0.003569, -0.003612, -0.001406, 0.014460
#*# 	  -0.018862, -0.011509, -0.014003, -0.010400, -0.007955, 0.000705, 0.001082, 0.004619, -0.002892, 0.001692, 0.008396, -0.002026, 0.000147, 0.002248, -0.000622, 0.003337, 0.003533, 0.005280, 0.007100, 0.007890, 0.007715, 0.010710, 0.011642, 0.007436, 0.023803
#*# 	  -0.013470, -0.010081, -0.005883, -0.003490, -0.001560, 0.005224, 0.007662, 0.006781, 0.009077, 0.006791, 0.006423, 0.005434, 0.003450, 0.001207, -0.000953, 0.003748, 0.005789, 0.011214, 0.011957, 0.010620, 0.009881, 0.011235, 0.010577, 0.013428, 0.025392
#*# 	  -0.013916, -0.006980, -0.006889, -0.005437, -0.001566, 0.002298, 0.008116, 0.012206, 0.006141, 0.010711, 0.015116, 0.002408, 0.006778, 0.003103, 0.003172, 0.007537, 0.006047, 0.013821, 0.013446, 0.016216, 0.016365, 0.018402, 0.017542, 0.011671, 0.029627
#*# 	  -0.011195, -0.005369, -0.003158, 0.001431, 0.002859, 0.008085, 0.012394, 0.012448, 0.015131, 0.015880, 0.014504, 0.013382, 0.011646, 0.008491, 0.007616, 0.010106, 0.012577, 0.015332, 0.018165, 0.017394, 0.017702, 0.017960, 0.016785, 0.017831, 0.028565
#*# 	  -0.011114, -0.003761, -0.004866, -0.002233, -0.000557, 0.004166, 0.007770, 0.007821, 0.012110, 0.017003, 0.009211, 0.014128, 0.018506, 0.005483, 0.010164, 0.013021, 0.016148, 0.019888, 0.024491, 0.019150, 0.018825, 0.017328, 0.011382, 0.019543, 0.028865
#*# 	  -0.017391, -0.009463, -0.007534, -0.006994, -0.000928, -0.000151, 0.002012, 0.004945, 0.006759, 0.006295, 0.007586, 0.007790, 0.005403, 0.002789, 0.002337, 0.006551, 0.009570, 0.013249, 0.016906, 0.011642, 0.010692, 0.009970, 0.003808, 0.011081, 0.023927
#*# 	  -0.029057, -0.020628, -0.020348, -0.018142, -0.015604, -0.010622, -0.007806, -0.009365, -0.003623, -0.003358, -0.003829, -0.001553, -0.006847, -0.008442, -0.007531, -0.005011, -0.000132, 0.004194, 0.004559, 0.003467, 0.002164, 0.002539, -0.000540, 0.005750, 0.019726
#*# 	  -0.035386, -0.030211, -0.024765, -0.022095, -0.021778, -0.018003, -0.014497, -0.013178, -0.010624, -0.010580, -0.011592, -0.011215, -0.013544, -0.015276, -0.013409, -0.010058, -0.005149, -0.000498, -0.001448, -0.002809, -0.005118, -0.006471, -0.013353, -0.004333, 0.008931
#*# 	  -0.043794, -0.036731, -0.033903, -0.033019, -0.031064, -0.025122, -0.022207, -0.022600, -0.018557, -0.016194, -0.016484, -0.016885, -0.019078, -0.019143, -0.018574, -0.010799, -0.005524, -0.001737, -0.004491, -0.004331, -0.007850, -0.011458, -0.012381, -0.005660, 0.009774
#*# 	  -0.053650, -0.052097, -0.042241, -0.042522, -0.042220, -0.031607, -0.031595, -0.031543, -0.028274, -0.026748, -0.026474, -0.026785, -0.030684, -0.033193, -0.032263, -0.029067, -0.024066, -0.019498, -0.019465, -0.017129, -0.021435, -0.021685, -0.028419, -0.017438, 0.002088
#*# 	  -0.061373, -0.053950, -0.052736, -0.049486, -0.046267, -0.045050, -0.043198, -0.042366, -0.038990, -0.038905, -0.039885, -0.039800, -0.041483, -0.043551, -0.042374, -0.039350, -0.032621, -0.028012, -0.026451, -0.023926, -0.027343, -0.025118, -0.030990, -0.018866, 0.000332
#*# 	  -0.068624, -0.060290, -0.055814, -0.054111, -0.055259, -0.054233, -0.047647, -0.050354, -0.046420, -0.046357, -0.047031, -0.047948, -0.050913, -0.054308, -0.053604, -0.051113, -0.045584, -0.040159, -0.036860, -0.032640, -0.038389, -0.035119, -0.029883, -0.024062, -0.007480
#*# 	  -0.079282, -0.069229, -0.068117, -0.067961, -0.065729, -0.062866, -0.061100, -0.060602, -0.057061, -0.056089, -0.058951, -0.058916, -0.058986, -0.065561, -0.064252, -0.059947, -0.061360, -0.051865, -0.046892, -0.047254, -0.042254, -0.038671, -0.045510, -0.034116, -0.018385
#*# 	  -0.092665, -0.087404, -0.087696, -0.086297, -0.084205, -0.079393, -0.077412, -0.074724, -0.071100, -0.071531, -0.072289, -0.074045, -0.075730, -0.076690, -0.076996, -0.073971, -0.068839, -0.064831, -0.059491, -0.054328, -0.052151, -0.048954, -0.046845, -0.040610, -0.027958
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4060342160676376,
#*# 	  1.7297626842392215,
#*# 	  0.7716374315840435,
#*# 	  0.36510270766610964,
#*# 	  0.3322402406311913,
#*# 	  0.3818286695861011,
#*# 	  -0.13990682327114304,
#*# 	  -0.32227376576433375,
#*# 	  0.2299646113082465,
#*# 	  0.24664256202878
#*# model_domain = 3.118356870063212e-07,3.3264972155395335e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 25.717317
#*# model_offset = -0.43000
