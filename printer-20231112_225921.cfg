# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 79.8
shaper_type_x: mzv
shaper_freq_y: 80.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.059138, -0.056353, -0.047606, -0.040614, -0.033190, -0.029402, -0.029440, -0.036775, -0.044759, -0.046034, -0.052858, -0.058727, -0.057899, -0.062887, -0.065867, -0.062936, -0.062714, -0.062678, -0.060295, -0.067259, -0.066981, -0.061872, -0.061480, -0.057410, -0.043240
#*# 	  -0.052776, -0.045964, -0.040008, -0.035862, -0.016722, -0.016408, -0.027763, -0.017151, -0.033024, -0.048545, -0.036770, -0.049507, -0.061166, -0.048170, -0.057493, -0.055983, -0.045899, -0.060059, -0.053233, -0.055562, -0.065833, -0.049037, -0.056521, -0.051127, -0.029672
#*# 	  -0.049657, -0.040564, -0.033534, -0.020513, -0.017992, -0.008452, -0.010049, -0.019569, -0.025295, -0.030753, -0.037995, -0.042671, -0.047589, -0.051977, -0.049177, -0.049753, -0.047663, -0.047074, -0.048191, -0.049868, -0.052750, -0.053105, -0.052909, -0.048205, -0.027983
#*# 	  -0.045221, -0.030529, -0.030458, -0.022969, -0.004747, -0.019738, -0.008708, -0.014656, -0.033874, -0.012538, -0.031562, -0.047984, -0.029151, -0.045181, -0.059567, -0.033215, -0.041859, -0.049609, -0.029767, -0.039797, -0.045012, -0.034341, -0.061780, -0.037455, -0.026362
#*# 	  -0.042378, -0.029544, -0.032446, -0.022655, -0.017069, -0.014434, -0.009498, -0.014123, -0.019418, -0.023097, -0.028933, -0.034634, -0.039808, -0.044875, -0.045674, -0.041187, -0.042379, -0.037848, -0.037500, -0.041217, -0.043563, -0.045907, -0.045860, -0.044849, -0.026842
#*# 	  -0.047327, -0.033786, -0.038553, -0.016731, -0.019644, -0.028367, -0.003463, -0.016145, -0.033102, -0.008495, -0.028102, -0.033487, -0.025143, -0.056950, -0.045462, -0.043674, -0.051422, -0.026664, -0.034036, -0.037705, -0.028225, -0.039378, -0.059898, -0.032165, -0.027376
#*# 	  -0.042128, -0.030210, -0.028579, -0.027082, -0.022132, -0.018901, -0.017695, -0.017861, -0.019264, -0.022763, -0.027814, -0.031314, -0.037541, -0.041696, -0.043739, -0.042642, -0.039089, -0.035773, -0.032787, -0.037026, -0.040045, -0.040494, -0.042893, -0.045408, -0.032605
#*# 	  -0.040286, -0.038840, -0.025929, -0.025585, -0.030296, -0.010676, -0.016007, -0.027631, -0.004220, -0.019174, -0.035248, -0.013509, -0.031896, -0.045803, -0.025606, -0.035564, -0.030786, -0.019385, -0.032266, -0.025534, -0.023610, -0.031868, -0.024881, -0.041163, -0.023072
#*# 	  -0.039766, -0.030502, -0.027132, -0.025966, -0.021619, -0.016634, -0.015449, -0.015387, -0.017554, -0.016200, -0.022446, -0.022362, -0.024035, -0.030167, -0.030203, -0.027881, -0.025365, -0.021597, -0.020458, -0.024792, -0.027701, -0.029212, -0.031020, -0.031619, -0.023687
#*# 	  -0.031899, -0.032120, -0.007318, -0.019308, -0.024185, -0.004476, -0.022023, -0.013524, -0.000260, -0.024257, -0.014908, -0.016041, -0.031535, -0.007773, -0.023769, -0.031896, -0.007062, -0.014830, -0.020150, -0.010361, -0.012119, -0.013171, -0.014022, -0.036284, -0.005320
#*# 	  -0.031334, -0.024000, -0.018904, -0.016338, -0.012758, -0.010289, -0.008010, -0.009392, -0.012790, -0.008231, -0.010915, -0.015655, -0.011823, -0.017235, -0.022044, -0.014985, -0.015193, -0.012248, -0.013772, -0.011745, -0.016699, -0.017386, -0.019210, -0.027890, -0.009511
#*# 	  -0.022454, -0.010045, -0.010095, -0.019408, 0.002527, -0.003186, -0.011698, 0.007582, -0.002111, -0.015209, 0.008169, -0.007315, -0.009366, 0.001124, -0.028205, -0.012938, -0.009715, -0.012917, 0.002375, -0.002307, 0.000831, 0.000942, -0.011196, -0.034509, 0.005339
#*# 	  -0.026335, -0.016405, -0.012151, -0.008600, -0.005950, -0.001970, 0.000146, 0.006017, 0.002117, -0.003220, 0.002263, -0.002110, -0.009989, -0.004870, -0.013518, -0.010039, -0.003936, -0.002076, -0.003142, -0.003100, -0.007392, -0.007061, -0.007659, -0.023150, 0.009456
#*# 	  -0.019929, -0.007608, -0.017942, -0.002760, 0.006618, -0.007635, 0.004064, 0.005097, -0.005482, 0.019590, 0.006547, -0.009877, 0.013270, -0.005695, -0.023244, 0.004465, -0.004161, -0.005321, 0.009524, 0.005618, 0.006428, 0.004272, -0.012081, -0.014210, 0.008814
#*# 	  -0.024799, -0.015988, -0.008034, -0.006108, -0.003002, -0.000602, 0.002506, 0.006566, 0.012223, 0.004869, 0.006180, 0.005071, -0.004537, 0.003353, -0.008397, -0.010139, 0.002793, 0.004308, 0.002526, 0.001958, 0.002182, -0.000360, -0.001339, -0.014619, 0.009703
#*# 	  -0.023396, -0.013974, -0.018521, 0.000874, -0.003066, -0.010128, 0.010180, 0.002423, 0.005834, 0.019850, -0.006780, 0.004306, 0.000004, -0.018692, 0.007343, -0.005934, -0.011464, 0.015805, 0.010581, 0.006541, 0.010500, 0.007430, -0.004296, 0.002647, 0.006975
#*# 	  -0.031933, -0.023232, -0.017493, -0.013443, -0.011032, -0.007406, -0.003970, -0.004481, 0.004713, 0.001106, -0.005321, 0.002558, -0.007614, -0.015146, -0.007387, -0.010867, -0.007433, 0.002432, 0.000798, -0.001097, -0.002327, -0.000503, -0.008593, -0.017309, 0.000129
#*# 	  -0.032155, -0.035092, -0.017621, -0.019429, -0.023766, -0.004999, -0.011019, -0.019276, 0.003679, -0.006158, -0.020868, 0.004980, -0.012167, -0.030316, -0.002429, -0.013874, -0.006922, 0.006402, -0.002882, 0.001414, 0.000829, 0.000519, -0.001034, -0.024862, -0.002050
#*# 	  -0.048247, -0.038290, -0.031314, -0.028970, -0.024899, -0.021530, -0.016062, -0.014890, -0.019604, -0.006402, -0.015647, -0.017578, -0.014008, -0.031905, -0.025048, -0.021293, -0.019314, -0.005805, -0.008411, -0.010940, -0.011385, -0.010922, -0.020955, -0.014074, -0.009608
#*# 	  -0.049525, -0.052075, -0.026292, -0.035469, -0.032210, -0.021725, -0.035601, -0.025701, -0.022773, -0.034212, -0.013251, -0.027114, -0.040601, -0.019225, -0.032032, -0.036126, -0.012167, -0.015084, -0.017409, -0.012597, -0.014414, -0.019819, -0.013757, -0.038374, -0.006917
#*# 	  -0.064754, -0.052682, -0.047571, -0.045912, -0.040626, -0.035412, -0.033372, -0.024008, -0.037237, -0.029479, -0.030731, -0.042579, -0.028318, -0.038816, -0.048402, -0.028536, -0.028031, -0.026732, -0.020490, -0.022110, -0.020930, -0.021881, -0.032032, -0.026826, -0.011074
#*# 	  -0.060039, -0.049711, -0.046423, -0.052336, -0.038256, -0.041263, -0.045951, -0.031136, -0.035753, -0.036061, -0.027379, -0.049166, -0.041660, -0.034686, -0.054290, -0.041263, -0.036277, -0.038026, -0.023788, -0.026263, -0.023852, -0.023542, -0.040555, -0.042940, -0.011790
#*# 	  -0.072560, -0.063394, -0.054095, -0.057227, -0.050002, -0.048041, -0.050723, -0.035502, -0.040082, -0.048227, -0.035248, -0.045501, -0.055764, -0.042344, -0.053399, -0.048481, -0.037611, -0.042818, -0.035740, -0.035307, -0.035765, -0.029077, -0.042901, -0.029045, -0.009449
#*# 	  -0.072522, -0.060904, -0.071022, -0.060129, -0.058452, -0.063167, -0.048575, -0.052002, -0.057945, -0.041200, -0.052231, -0.063554, -0.049287, -0.058924, -0.069917, -0.048388, -0.050525, -0.046185, -0.036874, -0.046438, -0.042284, -0.043348, -0.059083, -0.031007, -0.021101
#*# 	  -0.090961, -0.080711, -0.074295, -0.073251, -0.070048, -0.060818, -0.061511, -0.061035, -0.050413, -0.055407, -0.058175, -0.056198, -0.070270, -0.064640, -0.066226, -0.067207, -0.049860, -0.053755, -0.057161, -0.042614, -0.043057, -0.040200, -0.039416, -0.032299, -0.022383
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	1.7354079221972734,
#*# 	0.7630322078872325,
#*# 	0.3972884925633777,
#*# 	0.37849463200726147,
#*# 	0.3169570227532607,
#*# 	-0.2360704257340257,
#*# 	-0.2840356980838786,
#*# 	0.2759119913545306,
#*# 	0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = -0.45000
