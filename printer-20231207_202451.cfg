[include moonraker_obico_macros.cfg]
# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 66.8
shaper_type_x: mzv
shaper_freq_y: 68.0
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.068102, -0.069316, -0.062190, -0.053277, -0.054120, -0.048470, -0.041467, -0.057590, -0.051905, -0.047164, -0.058478, -0.061455, -0.071095, -0.068579, -0.065154, -0.075511, -0.068967, -0.061628, -0.074701, -0.070367, -0.066079, -0.078221, -0.073183, -0.068017, -0.061225
#*# 	  -0.065928, -0.059834, -0.055891, -0.049035, -0.038447, -0.046376, -0.039437, -0.034501, -0.052232, -0.045795, -0.041693, -0.062869, -0.058534, -0.062531, -0.064291, -0.054757, -0.067692, -0.060363, -0.053170, -0.069812, -0.063493, -0.058447, -0.069949, -0.060501, -0.051088
#*# 	  -0.059326, -0.053531, -0.047957, -0.041992, -0.034213, -0.035527, -0.032713, -0.030336, -0.040842, -0.038371, -0.037963, -0.047940, -0.052272, -0.060751, -0.058304, -0.052614, -0.056220, -0.053134, -0.049045, -0.060142, -0.056548, -0.055032, -0.058763, -0.054170, -0.045183
#*# 	  -0.052027, -0.046992, -0.041217, -0.033729, -0.033262, -0.026276, -0.020461, -0.034179, -0.028943, -0.023253, -0.036523, -0.041290, -0.038491, -0.050663, -0.052809, -0.055844, -0.046925, -0.039672, -0.052335, -0.048448, -0.043881, -0.056151, -0.050502, -0.047203, -0.039061
#*# 	  -0.044823, -0.040000, -0.035822, -0.030495, -0.025163, -0.019151, -0.023755, -0.021031, -0.017602, -0.030718, -0.028587, -0.027374, -0.039476, -0.044337, -0.052378, -0.044639, -0.036982, -0.044089, -0.039388, -0.036572, -0.050570, -0.044451, -0.044518, -0.041916, -0.033691
#*# 	  -0.044906, -0.038797, -0.031420, -0.033304, -0.023424, -0.013187, -0.026916, -0.019489, -0.010646, -0.030879, -0.025966, -0.020552, -0.036694, -0.042911, -0.055057, -0.042903, -0.030973, -0.046672, -0.036403, -0.028754, -0.050673, -0.041415, -0.036068, -0.035195, -0.028949
#*# 	  -0.043002, -0.036125, -0.032675, -0.028560, -0.025169, -0.021296, -0.016022, -0.021889, -0.017854, -0.013872, -0.023171, -0.028340, -0.031859, -0.037858, -0.041384, -0.043971, -0.035339, -0.027162, -0.036932, -0.034217, -0.029753, -0.043628, -0.037196, -0.032043, -0.024514
#*# 	  -0.042267, -0.033397, -0.036160, -0.027995, -0.015143, -0.028207, -0.018262, -0.006535, -0.026595, -0.016678, -0.006950, -0.023187, -0.026531, -0.041972, -0.034537, -0.021412, -0.039425, -0.028218, -0.016430, -0.041664, -0.035522, -0.024527, -0.037522, -0.026888, -0.019502
#*# 	  -0.039791, -0.036096, -0.030051, -0.026275, -0.021073, -0.018644, -0.014748, -0.010562, -0.017170, -0.012375, -0.007740, -0.015365, -0.017192, -0.027490, -0.024236, -0.017384, -0.025737, -0.020004, -0.014380, -0.029261, -0.027496, -0.020652, -0.026374, -0.017488, -0.014729
#*# 	  -0.037293, -0.036064, -0.028539, -0.017369, -0.027160, -0.014154, -0.000872, -0.024913, -0.012197, 0.001786, -0.012103, -0.014142, -0.013554, -0.016503, -0.018886, -0.030156, -0.016719, -0.003638, -0.031100, -0.020226, -0.009912, -0.039820, -0.022318, -0.014143, -0.003884
#*# 	  -0.034301, -0.028654, -0.024706, -0.020523, -0.015215, -0.008973, -0.010997, -0.008300, -0.003779, -0.013064, -0.009359, -0.002898, -0.009930, -0.012142, -0.020144, -0.011707, -0.002455, -0.019617, -0.010258, -0.004884, -0.026283, -0.017066, -0.009706, -0.006291, -0.001555
#*# 	  -0.032207, -0.024257, -0.013660, -0.023465, -0.010104, 0.001182, -0.015049, -0.003194, 0.009926, -0.003384, -0.004707, 0.007836, -0.006898, -0.009299, -0.025624, -0.010137, 0.005023, -0.022122, -0.008953, 0.003452, -0.026617, -0.013659, 0.000252, 0.003034, 0.011747
#*# 	  -0.029603, -0.022256, -0.018386, -0.014258, -0.008671, -0.003448, 0.004264, -0.005249, 0.000521, 0.006460, -0.007920, -0.002636, 0.002563, -0.007707, -0.009660, -0.014998, -0.005792, 0.002936, -0.012405, -0.005102, 0.001881, -0.017672, -0.001861, 0.003321, 0.009019
#*# 	  -0.030267, -0.016642, -0.022313, -0.012281, 0.002155, -0.010530, 0.002727, 0.014027, -0.007956, 0.005337, 0.017916, 0.001916, 0.000080, -0.017990, -0.006288, 0.008484, -0.016827, -0.001346, 0.010790, -0.011776, -0.005673, 0.010814, -0.011673, 0.010088, 0.017200
#*# 	  -0.031104, -0.023998, -0.017859, -0.013469, -0.006051, -0.006226, 0.000505, 0.006341, 0.000738, 0.005930, 0.010872, 0.003541, 0.001401, -0.003161, -0.006602, -0.005463, -0.008948, -0.001626, 0.003799, -0.009853, -0.005945, 0.002858, -0.005794, 0.005408, 0.009325
#*# 	  -0.030141, -0.025816, -0.017446, -0.005966, -0.016068, -0.003739, 0.008756, -0.006271, 0.004975, 0.017566, 0.005588, 0.003172, -0.009716, -0.002421, 0.007666, -0.016026, -0.003640, 0.009774, -0.012687, -0.002665, 0.007803, -0.016954, -0.002067, 0.006756, 0.012783
#*# 	  -0.040090, -0.031608, -0.024924, -0.020265, -0.014614, -0.008156, -0.009732, -0.004903, 0.001081, -0.006134, -0.003207, 0.000484, -0.008087, -0.011818, -0.013536, -0.012089, -0.002688, -0.014780, -0.008588, -0.003317, -0.021564, -0.014168, -0.006891, 0.000108, -0.000175
#*# 	  -0.046901, -0.038426, -0.029162, -0.031895, -0.022223, -0.010673, -0.021005, -0.011436, -0.001149, -0.008144, -0.009596, -0.012160, -0.014414, -0.006079, -0.028580, -0.015762, -0.002084, -0.024597, -0.012840, -0.002687, -0.027429, -0.013262, -0.004694, -0.004134, 0.001604
#*# 	  -0.056931, -0.047233, -0.041254, -0.034613, -0.031109, -0.025843, -0.019306, -0.023408, -0.018815, -0.013412, -0.024965, -0.021400, -0.017713, -0.026048, -0.027014, -0.029262, -0.020423, -0.011310, -0.025845, -0.022138, -0.017523, -0.028579, -0.022363, -0.015490, -0.009040
#*# 	  -0.063526, -0.051728, -0.052504, -0.043622, -0.032390, -0.039154, -0.029420, -0.019556, -0.026172, -0.024645, -0.027209, -0.029454, -0.031127, -0.044243, -0.034498, -0.020640, -0.039014, -0.025410, -0.014121, -0.036879, -0.029027, -0.017713, -0.027102, -0.015223, -0.008968
#*# 	  -0.070002, -0.060965, -0.055514, -0.049569, -0.042704, -0.042666, -0.036472, -0.031534, -0.037426, -0.033155, -0.029519, -0.042886, -0.039703, -0.034573, -0.042322, -0.038030, -0.040606, -0.032194, -0.024412, -0.041748, -0.032226, -0.027142, -0.033682, -0.021647, -0.015417
#*# 	  -0.073521, -0.065840, -0.060153, -0.052152, -0.054487, -0.046203, -0.036130, -0.045798, -0.038203, -0.029884, -0.040537, -0.043427, -0.053506, -0.046999, -0.037600, -0.053100, -0.041461, -0.027572, -0.045670, -0.036774, -0.026394, -0.040272, -0.031091, -0.022396, -0.016075
#*# 	  -0.080301, -0.072560, -0.066709, -0.063014, -0.057729, -0.050982, -0.052616, -0.047528, -0.041317, -0.050767, -0.049082, -0.045169, -0.053018, -0.054883, -0.056303, -0.052615, -0.049193, -0.056051, -0.044611, -0.034912, -0.048180, -0.040550, -0.033557, -0.029735, -0.020999
#*# 	  -0.087721, -0.079415, -0.076170, -0.071745, -0.066391, -0.058889, -0.061582, -0.054458, -0.048178, -0.053583, -0.056257, -0.065893, -0.060353, -0.055184, -0.071814, -0.061026, -0.049632, -0.062926, -0.050823, -0.044307, -0.053279, -0.048242, -0.042010, -0.036644, -0.026630
#*# 	  -0.102653, -0.093107, -0.088009, -0.082060, -0.079812, -0.072187, -0.065020, -0.069138, -0.064816, -0.061557, -0.072473, -0.068899, -0.066367, -0.072341, -0.072915, -0.069259, -0.064832, -0.055665, -0.064099, -0.057770, -0.053097, -0.058460, -0.053161, -0.042547, -0.037123
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	  1.7354079221972734,
#*# 	  0.7630322078872325,
#*# 	  0.3972884925633777,
#*# 	  0.37849463200726147,
#*# 	  0.3169570227532607,
#*# 	  -0.2360704257340257,
#*# 	  -0.2840356980838786,
#*# 	  0.2759119913545306,
#*# 	  0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = -0.39000
