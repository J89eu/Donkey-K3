# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 113.2
shaper_type_x: mzv
shaper_freq_y: 115.2
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 120
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.060769, -0.070805, -0.061834, -0.078609, -0.069022, -0.057912, -0.067267, -0.070394, -0.071400, -0.075440, -0.079934, -0.084729, -0.087079, -0.089667, -0.100619, -0.089800, -0.078894, -0.089370, -0.082730, -0.076993, -0.088735, -0.081769, -0.079311, -0.080074, -0.070700
#*# 	  -0.061566, -0.061963, -0.058995, -0.060586, -0.057868, -0.055196, -0.057780, -0.060244, -0.061831, -0.065192, -0.071119, -0.076590, -0.079966, -0.083740, -0.083285, -0.080877, -0.078559, -0.074460, -0.074891, -0.075179, -0.075549, -0.074900, -0.074169, -0.071974, -0.061882
#*# 	  -0.065834, -0.058153, -0.061021, -0.054217, -0.053204, -0.051299, -0.049797, -0.052195, -0.053679, -0.057661, -0.063941, -0.067703, -0.072695, -0.081434, -0.078517, -0.068484, -0.073699, -0.066551, -0.060258, -0.064566, -0.065251, -0.060161, -0.059527, -0.063604, -0.053440
#*# 	  -0.053903, -0.048234, -0.051338, -0.046974, -0.047452, -0.042485, -0.041444, -0.041886, -0.042194, -0.047395, -0.052973, -0.057204, -0.062711, -0.065664, -0.066292, -0.063174, -0.058523, -0.055417, -0.054934, -0.052842, -0.054852, -0.055227, -0.054938, -0.054919, -0.047109
#*# 	  -0.050697, -0.044930, -0.044982, -0.043439, -0.040174, -0.037956, -0.034773, -0.035487, -0.036161, -0.038299, -0.043634, -0.048557, -0.058057, -0.060171, -0.059173, -0.056225, -0.051694, -0.047253, -0.046571, -0.046372, -0.046883, -0.046311, -0.045743, -0.050289, -0.040465
#*# 	  -0.042398, -0.040225, -0.042047, -0.042168, -0.036979, -0.036281, -0.034968, -0.035713, -0.034930, -0.037091, -0.042277, -0.046266, -0.050467, -0.056718, -0.057172, -0.053723, -0.050267, -0.044965, -0.044143, -0.042288, -0.042961, -0.042828, -0.043200, -0.052172, -0.038086
#*# 	  -0.040432, -0.039422, -0.038333, -0.039302, -0.036032, -0.033629, -0.032192, -0.032297, -0.031723, -0.033634, -0.038638, -0.043063, -0.048623, -0.052477, -0.054092, -0.051006, -0.046290, -0.041914, -0.038130, -0.039240, -0.039242, -0.039312, -0.038801, -0.046183, -0.030520
#*# 	  -0.031056, -0.032775, -0.032934, -0.033518, -0.029986, -0.027107, -0.025211, -0.024026, -0.023142, -0.025350, -0.028711, -0.031837, -0.037116, -0.039656, -0.042211, -0.039566, -0.035766, -0.030634, -0.028421, -0.026537, -0.026225, -0.023832, -0.025729, -0.035204, -0.020241
#*# 	  -0.030147, -0.026408, -0.026807, -0.025646, -0.024410, -0.019292, -0.015872, -0.016178, -0.015510, -0.018521, -0.020225, -0.023228, -0.027187, -0.030878, -0.033564, -0.032920, -0.028206, -0.023751, -0.022499, -0.014886, -0.009509, -0.012343, -0.017131, -0.016445, -0.012856
#*# 	  -0.024934, -0.021468, -0.026069, -0.023985, -0.020530, -0.015742, -0.014343, -0.011848, -0.011703, -0.013939, -0.014042, -0.016758, -0.018783, -0.022811, -0.024964, -0.021819, -0.016030, -0.010729, -0.003240, -0.000365, -0.007544, -0.000914, -0.008126, -0.007047, -0.002352
#*# 	  -0.021497, -0.017420, -0.015542, -0.014781, -0.010752, -0.008145, -0.007193, -0.007480, -0.008025, -0.007729, -0.008544, -0.009635, -0.009662, -0.014074, -0.015684, -0.011808, -0.009081, -0.007161, -0.002736, 0.005636, 0.006048, 0.008931, -0.001352, -0.000888, 0.003277
#*# 	  -0.014524, -0.012150, -0.011710, -0.011642, -0.005836, -0.004297, 0.000608, 0.000202, 0.003350, 0.001637, 0.000813, -0.000633, -0.002095, -0.003515, -0.004586, 0.001146, 0.004465, 0.005748, 0.006580, 0.008624, 0.014115, 0.011112, 0.008799, 0.010324, 0.017070
#*# 	  -0.007847, -0.002020, 0.000985, 0.001453, 0.005721, 0.009772, 0.012257, 0.011571, 0.013745, 0.013170, 0.012350, 0.008126, 0.006022, 0.004318, 0.002255, 0.007602, 0.007197, 0.009854, 0.011419, 0.013424, 0.020689, 0.020869, 0.014451, 0.014906, 0.023647
#*# 	  -0.008438, -0.005767, -0.003088, -0.001847, 0.002202, 0.008534, 0.014272, 0.013234, 0.014970, 0.013283, 0.011059, 0.008089, 0.006515, 0.003489, 0.003106, 0.006721, 0.011051, 0.014249, 0.014790, 0.016377, 0.018742, 0.018440, 0.017795, 0.019235, 0.027136
#*# 	  -0.008448, -0.001191, -0.001428, 0.000205, 0.004650, 0.007801, 0.011678, 0.012841, 0.015995, 0.016968, 0.015939, 0.015295, 0.011918, 0.009007, 0.006510, 0.009400, 0.010564, 0.013620, 0.013603, 0.016906, 0.015943, 0.020807, 0.015365, 0.018194, 0.021149
#*# 	  -0.007051, 0.000676, 0.000610, 0.001668, 0.005781, 0.007883, 0.013212, 0.016160, 0.019041, 0.018987, 0.017392, 0.017262, 0.013042, 0.009382, 0.009009, 0.010640, 0.015067, 0.018859, 0.020312, 0.021494, 0.021795, 0.021035, 0.018682, 0.021488, 0.025718
#*# 	  -0.012995, -0.002671, -0.002442, -0.002276, 0.001590, 0.005312, 0.005572, 0.008150, 0.011721, 0.008869, 0.009350, 0.008754, 0.005364, 0.002809, 0.002763, 0.005777, 0.009021, 0.011522, 0.010381, 0.011559, 0.016622, 0.010309, 0.009201, 0.013488, 0.018905
#*# 	  -0.017455, -0.015420, -0.016417, -0.011232, -0.010110, -0.008407, 0.000714, 0.002931, -0.000607, -0.001266, -0.003839, -0.004713, -0.006066, -0.007817, -0.006403, -0.002292, 0.001536, 0.006929, 0.006659, 0.006608, 0.006068, 0.006406, 0.006087, 0.009586, 0.011759
#*# 	  -0.033136, -0.024057, -0.019711, -0.017463, -0.013589, -0.011144, -0.009112, -0.009303, -0.005280, -0.004120, -0.005721, -0.006708, -0.007760, -0.012245, -0.009766, -0.006292, -0.002857, 0.001692, 0.002166, 0.001571, 0.002190, -0.003114, -0.003986, -0.000241, 0.010583
#*# 	  -0.032873, -0.026779, -0.024691, -0.023328, -0.021840, -0.016979, -0.014992, -0.014366, -0.008929, -0.010782, -0.013459, -0.011912, -0.013625, -0.016806, -0.017181, -0.011358, -0.007367, -0.001933, -0.001870, -0.000759, -0.004182, -0.005967, -0.005200, -0.000710, 0.007393
#*# 	  -0.046829, -0.037870, -0.037047, -0.036663, -0.032867, -0.031409, -0.029569, -0.027848, -0.024583, -0.023256, -0.024518, -0.025615, -0.026760, -0.029151, -0.031264, -0.025768, -0.021039, -0.017875, -0.015730, -0.012162, -0.016372, -0.018692, -0.021328, -0.014513, -0.005425
#*# 	  -0.052814, -0.047773, -0.045983, -0.043691, -0.041251, -0.039214, -0.035985, -0.034637, -0.032727, -0.031960, -0.030175, -0.031921, -0.033077, -0.034199, -0.034165, -0.031955, -0.024611, -0.023825, -0.022477, -0.019595, -0.023370, -0.022369, -0.019005, -0.012081, -0.006264
#*# 	  -0.059775, -0.053996, -0.047221, -0.049247, -0.046635, -0.043473, -0.040649, -0.040753, -0.035778, -0.035643, -0.038515, -0.040898, -0.041832, -0.042247, -0.045949, -0.038388, -0.033824, -0.031549, -0.030336, -0.029589, -0.030385, -0.027126, -0.026958, -0.020305, -0.010565
#*# 	  -0.068979, -0.061507, -0.060271, -0.062674, -0.057819, -0.055313, -0.053449, -0.051336, -0.047387, -0.049556, -0.050132, -0.050790, -0.052421, -0.056742, -0.058179, -0.052274, -0.048219, -0.045241, -0.040410, -0.038928, -0.038955, -0.032021, -0.029832, -0.028279, -0.019686
#*# 	  -0.090667, -0.083077, -0.078028, -0.078328, -0.077885, -0.072302, -0.072020, -0.072049, -0.063116, -0.067265, -0.069513, -0.069383, -0.071716, -0.073315, -0.073652, -0.070797, -0.066829, -0.060591, -0.054942, -0.049271, -0.046820, -0.041350, -0.040871, -0.033440, -0.015422
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4060342160676376,
#*# 	  1.7297626842392215,
#*# 	  0.7716374315840435,
#*# 	  0.36510270766610964,
#*# 	  0.3322402406311913,
#*# 	  0.3818286695861011,
#*# 	  -0.13990682327114304,
#*# 	  -0.32227376576433375,
#*# 	  0.2299646113082465,
#*# 	  0.24664256202878
#*# model_domain = 3.118356870063212e-07,3.3264972155395335e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 25.717317
#*# model_offset = -0.46000
