# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 70.8
shaper_type_x: mzv
shaper_freq_y: 83.6
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 125
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.052151, -0.053818, -0.045007, -0.040369, -0.035390, -0.035265, -0.035048, -0.034090, -0.041353, -0.039635, -0.041033, -0.051042, -0.052354, -0.054902, -0.059277, -0.057965, -0.059317, -0.053452, -0.049153, -0.055469, -0.054942, -0.054399, -0.055822, -0.049685, -0.040687
#*# 	  -0.047084, -0.040357, -0.034339, -0.029397, -0.025702, -0.022772, -0.020578, -0.028732, -0.026870, -0.025782, -0.036576, -0.038603, -0.039844, -0.051202, -0.050148, -0.047017, -0.044885, -0.039000, -0.045198, -0.043528, -0.043646, -0.045244, -0.046050, -0.044332, -0.032482
#*# 	  -0.039370, -0.031180, -0.026318, -0.019588, -0.015741, -0.013452, -0.014246, -0.014124, -0.017252, -0.018324, -0.023784, -0.028826, -0.033768, -0.037619, -0.041294, -0.038263, -0.034287, -0.034169, -0.032296, -0.032243, -0.037658, -0.036870, -0.037282, -0.033335, -0.022986
#*# 	  -0.032179, -0.025916, -0.020560, -0.014733, -0.010982, -0.006758, -0.005716, -0.009767, -0.009819, -0.015761, -0.015776, -0.018119, -0.031150, -0.032643, -0.032859, -0.033213, -0.028797, -0.024642, -0.028594, -0.028529, -0.026839, -0.031707, -0.031771, -0.030327, -0.019206
#*# 	  -0.030024, -0.021590, -0.017491, -0.011710, -0.007967, -0.005383, -0.005107, -0.005332, -0.004246, -0.009491, -0.012367, -0.017056, -0.023340, -0.028865, -0.033253, -0.030658, -0.025700, -0.024719, -0.021006, -0.021074, -0.028003, -0.028370, -0.026267, -0.025868, -0.017308
#*# 	  -0.028584, -0.023366, -0.017972, -0.015313, -0.007871, -0.002391, -0.006934, -0.003753, -0.000498, -0.012235, -0.011023, -0.012485, -0.026858, -0.030029, -0.030263, -0.034893, -0.027737, -0.022066, -0.023552, -0.022682, -0.031731, -0.027850, -0.025094, -0.025172, -0.014386
#*# 	  -0.028372, -0.020869, -0.017922, -0.012651, -0.009259, -0.006117, -0.003844, -0.003456, -0.002660, -0.006397, -0.008632, -0.011893, -0.021524, -0.026010, -0.028661, -0.030096, -0.025011, -0.021771, -0.019725, -0.018433, -0.023868, -0.024876, -0.022146, -0.023459, -0.012609
#*# 	  -0.028182, -0.020672, -0.016921, -0.017562, -0.010258, -0.003515, -0.008266, -0.003967, 0.000884, -0.009203, -0.007631, -0.007357, -0.016485, -0.021951, -0.028906, -0.024450, -0.019716, -0.019860, -0.016106, -0.014779, -0.023036, -0.021930, -0.019311, -0.018924, -0.009990
#*# 	  -0.026735, -0.020729, -0.018881, -0.016627, -0.011344, -0.006694, -0.004831, -0.004512, -0.004901, -0.005257, -0.005802, -0.007737, -0.012490, -0.016062, -0.019983, -0.017827, -0.015978, -0.012690, -0.011599, -0.012603, -0.014743, -0.017442, -0.017875, -0.017289, -0.008349
#*# 	  -0.024932, -0.020209, -0.015760, -0.016287, -0.008631, -0.002276, -0.004410, -0.001918, -0.008686, -0.005404, -0.001390, -0.009740, -0.007819, -0.007215, -0.016326, -0.011975, -0.007422, -0.011774, -0.007062, -0.005025, -0.012691, -0.009874, -0.009714, -0.009834, -0.000094
#*# 	  -0.021518, -0.014147, -0.014334, -0.010877, -0.006558, -0.001561, -0.000888, -0.002930, -0.003727, -0.003294, -0.003729, -0.003868, -0.006606, -0.007535, -0.009207, -0.007454, -0.005554, -0.005207, -0.004702, -0.004339, -0.004822, -0.004651, -0.007492, -0.007107, 0.004789
#*# 	  -0.018107, -0.009070, -0.010869, -0.005602, 0.002263, -0.000203, 0.003284, 0.006229, -0.002913, 0.000423, 0.002389, -0.005076, -0.003658, -0.003000, -0.009981, -0.004285, -0.000031, -0.002077, 0.003455, 0.000510, -0.002259, 0.004068, 0.001854, 0.002055, 0.013193
#*# 	  -0.016885, -0.009062, -0.007788, -0.004796, -0.000166, 0.003863, 0.005781, 0.004148, 0.003930, 0.003667, 0.002320, -0.000419, -0.003214, -0.004446, -0.007371, -0.004381, 0.000288, 0.000035, 0.001569, 0.002008, 0.001269, 0.002858, 0.001378, 0.001409, 0.012577
#*# 	  -0.016701, -0.009248, -0.008884, -0.004941, 0.003760, 0.002010, 0.005488, 0.008768, 0.003108, 0.005847, 0.003888, 0.001880, 0.002229, -0.007144, -0.007559, -0.002420, -0.004252, 0.000619, 0.006113, 0.003401, -0.001005, 0.006327, 0.004352, 0.006020, 0.016344
#*# 	  -0.017827, -0.010418, -0.007304, -0.004533, -0.000775, 0.003248, 0.005071, 0.006199, 0.007412, 0.009098, 0.006518, 0.005457, 0.003394, -0.001267, -0.005338, -0.003828, -0.001932, 0.000218, 0.003299, 0.002073, -0.000884, 0.003365, 0.001783, 0.001242, 0.014868
#*# 	  -0.019523, -0.013510, -0.012364, -0.007700, -0.003544, 0.000243, 0.005289, 0.000062, 0.004802, 0.008950, 0.001314, 0.002868, 0.002163, -0.006604, -0.007443, -0.005009, -0.007293, -0.004527, -0.000233, -0.003318, -0.007120, -0.004717, -0.001978, -0.000135, 0.010835
#*# 	  -0.026782, -0.019264, -0.017416, -0.015335, -0.010762, -0.007583, -0.006670, -0.001709, -0.003958, -0.000915, -0.001020, -0.007323, -0.008010, -0.009837, -0.014644, -0.013529, -0.011442, -0.011020, -0.008983, -0.012469, -0.015364, -0.009402, -0.012676, -0.010503, 0.006586
#*# 	  -0.033671, -0.029100, -0.026719, -0.021051, -0.022752, -0.015693, -0.011103, -0.016031, -0.010507, -0.004845, -0.014108, -0.014714, -0.016494, -0.023211, -0.023861, -0.022760, -0.019776, -0.014992, -0.022834, -0.019511, -0.017141, -0.021641, -0.020077, -0.019136, -0.003177
#*# 	  -0.042225, -0.033498, -0.033725, -0.030453, -0.026008, -0.023537, -0.020444, -0.014432, -0.019899, -0.015354, -0.013990, -0.024430, -0.024709, -0.025428, -0.031127, -0.028343, -0.022288, -0.025607, -0.024074, -0.023189, -0.029779, -0.025115, -0.025788, -0.017460, 0.001870
#*# 	  -0.047707, -0.045526, -0.040835, -0.037337, -0.037831, -0.030781, -0.025977, -0.030533, -0.025186, -0.023904, -0.025066, -0.024968, -0.035606, -0.034462, -0.035268, -0.039160, -0.032762, -0.027778, -0.034992, -0.033297, -0.029510, -0.034444, -0.030382, -0.025916, -0.004379
#*# 	  -0.059100, -0.048909, -0.045897, -0.046908, -0.039157, -0.032944, -0.036950, -0.031471, -0.024144, -0.028678, -0.026205, -0.038963, -0.037935, -0.038704, -0.047014, -0.043084, -0.037026, -0.043524, -0.036345, -0.030410, -0.047669, -0.033738, -0.026983, -0.024355, -0.007273
#*# 	  -0.061202, -0.057248, -0.051183, -0.048445, -0.044451, -0.038432, -0.042895, -0.037862, -0.030698, -0.039483, -0.035295, -0.035038, -0.046758, -0.047071, -0.048160, -0.055260, -0.046273, -0.035522, -0.049869, -0.042891, -0.046656, -0.037111, -0.031318, -0.027692, -0.011299
#*# 	  -0.061783, -0.059480, -0.057883, -0.061957, -0.050589, -0.041670, -0.047733, -0.041159, -0.034221, -0.043042, -0.040667, -0.039603, -0.053629, -0.055865, -0.054378, -0.061551, -0.053207, -0.061137, -0.049173, -0.035933, -0.055752, -0.039685, -0.033328, -0.029739, -0.014631
#*# 	  -0.064973, -0.061755, -0.061857, -0.061811, -0.058163, -0.051667, -0.060166, -0.050720, -0.045396, -0.053502, -0.049275, -0.050814, -0.061706, -0.061708, -0.062413, -0.060138, -0.055254, -0.060998, -0.055178, -0.046662, -0.061872, -0.045817, -0.042189, -0.037504, -0.023613
#*# 	  -0.077896, -0.072557, -0.070856, -0.069813, -0.064413, -0.062521, -0.061594, -0.062021, -0.061261, -0.061618, -0.061708, -0.061729, -0.062529, -0.065570, -0.062542, -0.068801, -0.064370, -0.061846, -0.061714, -0.061173, -0.056364, -0.061608, -0.056843, -0.044818, -0.032392
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3856315955046634,
#*# 	  1.704784316189037,
#*# 	  0.7555972902416769,
#*# 	  0.36667543624615445,
#*# 	  0.434303362806249,
#*# 	  0.4349327754326395,
#*# 	  -0.2874792938435709,
#*# 	  -0.38445860153829553,
#*# 	  0.31308406285770046,
#*# 	  0.2807313674313839
#*# model_domain = 3.1061274065710475e-07,3.327710933345885e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 71.318711
#*# model_offset = 0.03000
