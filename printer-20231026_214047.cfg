# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 70.8
shaper_type_x: mzv
shaper_freq_y: 83.6
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.057230, -0.056931, -0.048024, -0.040727, -0.035469, -0.031001, -0.031241, -0.035987, -0.035701, -0.040547, -0.039725, -0.038205, -0.052492, -0.053447, -0.050862, -0.058968, -0.051710, -0.046462, -0.055466, -0.053676, -0.052024, -0.057240, -0.059186, -0.056579, -0.048986
#*# 	  -0.056472, -0.046904, -0.041471, -0.035251, -0.029023, -0.025891, -0.025544, -0.025351, -0.027859, -0.026191, -0.027057, -0.036029, -0.039652, -0.043002, -0.049190, -0.044850, -0.041420, -0.041755, -0.042230, -0.042363, -0.046435, -0.047700, -0.050573, -0.048527, -0.041104
#*# 	  -0.048945, -0.038803, -0.033245, -0.026549, -0.021679, -0.015224, -0.010051, -0.020389, -0.014386, -0.010241, -0.019075, -0.024937, -0.030352, -0.035700, -0.038786, -0.039941, -0.033201, -0.025647, -0.036583, -0.033613, -0.031050, -0.040384, -0.040103, -0.037484, -0.028942
#*# 	  -0.043239, -0.034067, -0.028684, -0.021055, -0.014791, -0.011900, -0.009412, -0.007865, -0.011043, -0.009943, -0.010819, -0.021939, -0.025110, -0.028229, -0.033893, -0.031302, -0.028560, -0.026509, -0.025877, -0.029641, -0.030585, -0.031486, -0.033623, -0.034320, -0.025762
#*# 	  -0.040841, -0.029538, -0.025447, -0.017748, -0.013446, -0.008182, -0.005036, -0.010666, -0.005289, 0.000683, -0.016455, -0.015382, -0.016191, -0.034122, -0.031333, -0.023856, -0.026244, -0.023373, -0.022015, -0.024423, -0.026881, -0.034089, -0.030270, -0.028587, -0.020658
#*# 	  -0.038678, -0.028431, -0.023355, -0.017693, -0.010615, -0.009178, -0.005107, -0.001070, -0.003671, -0.003868, -0.008691, -0.013675, -0.021218, -0.030662, -0.031150, -0.026317, -0.029507, -0.024249, -0.019092, -0.024866, -0.026152, -0.024208, -0.031033, -0.027733, -0.019575
#*# 	  -0.041177, -0.031588, -0.026944, -0.020274, -0.014419, -0.011445, -0.007182, -0.004791, -0.003462, -0.004201, -0.008363, -0.014301, -0.016999, -0.031402, -0.031197, -0.026857, -0.032402, -0.024936, -0.019726, -0.025270, -0.025198, -0.024451, -0.026737, -0.026842, -0.018802
#*# 	  -0.038693, -0.032012, -0.028765, -0.021742, -0.016262, -0.011783, -0.007411, -0.008581, -0.004709, -0.000895, -0.011308, -0.012147, -0.013636, -0.027673, -0.028393, -0.023832, -0.027687, -0.021575, -0.015988, -0.019285, -0.022188, -0.026599, -0.024292, -0.023518, -0.015045
#*# 	  -0.043498, -0.035043, -0.031263, -0.025427, -0.016395, -0.014844, -0.010012, -0.004415, -0.008689, -0.006665, -0.003112, -0.014825, -0.015243, -0.020819, -0.024442, -0.023940, -0.022004, -0.019206, -0.017026, -0.020796, -0.020546, -0.018713, -0.022478, -0.021146, -0.012516
#*# 	  -0.042026, -0.033909, -0.030609, -0.022536, -0.021010, -0.012249, -0.005027, -0.013905, -0.007172, -0.000902, -0.010480, -0.006910, -0.005187, -0.014813, -0.017397, -0.017424, -0.015666, -0.013349, -0.015538, -0.012992, -0.010114, -0.022872, -0.019104, -0.016295, -0.009121
#*# 	  -0.039473, -0.030126, -0.026926, -0.021343, -0.013756, -0.008381, -0.005733, -0.005743, -0.009626, -0.004156, -0.000272, -0.007601, -0.006240, -0.005778, -0.015504, -0.011067, -0.006470, -0.012009, -0.007533, -0.004393, -0.012154, -0.013247, -0.012515, -0.011777, -0.001737
#*# 	  -0.036208, -0.028562, -0.023366, -0.015393, -0.014277, -0.005771, 0.002243, -0.003072, -0.002572, -0.001856, -0.001857, -0.002741, -0.009027, -0.007203, -0.004215, -0.013681, -0.007864, -0.000588, -0.011163, -0.006737, -0.003198, -0.014009, -0.008967, -0.005902, 0.001765
#*# 	  -0.035102, -0.026066, -0.021570, -0.018462, -0.008082, 0.000563, -0.003264, 0.000830, 0.007228, 0.001059, -0.000719, -0.001188, -0.004539, -0.006529, -0.013662, -0.007738, -0.004788, -0.009743, -0.003518, -0.000989, -0.011823, -0.008333, -0.004451, -0.004619, 0.003427
#*# 	  -0.037501, -0.026657, -0.022818, -0.017438, -0.009717, -0.003143, -0.006055, 0.002033, 0.011810, -0.004985, 0.001347, 0.001960, -0.010450, -0.007506, -0.004096, -0.013993, -0.009345, -0.002632, -0.005087, -0.005738, -0.006556, -0.006531, -0.007717, -0.006513, 0.004686
#*# 	  -0.037461, -0.026489, -0.021635, -0.019295, -0.011268, -0.000133, -0.005786, 0.003335, 0.015311, -0.001198, 0.000255, 0.001677, -0.005767, -0.002995, -0.000780, -0.009928, -0.008903, -0.007076, -0.004898, -0.006031, -0.011467, -0.009256, -0.005221, -0.007920, 0.006925
#*# 	  -0.041417, -0.030989, -0.022511, -0.024627, -0.015139, -0.005060, -0.011389, -0.000808, 0.015230, -0.006746, 0.007301, 0.004897, -0.004592, -0.009758, -0.014974, -0.013215, -0.011753, -0.014352, -0.009916, -0.007108, -0.020618, -0.014799, -0.012624, -0.008537, -0.003134
#*# 	  -0.049861, -0.039365, -0.033812, -0.024601, -0.020855, -0.014294, -0.010067, -0.005338, -0.002469, -0.012255, -0.005548, -0.005570, -0.017593, -0.013420, -0.009660, -0.023347, -0.018732, -0.008851, -0.023691, -0.020156, -0.013776, -0.021909, -0.022343, -0.023275, -0.006467
#*# 	  -0.060142, -0.048182, -0.039235, -0.042505, -0.030189, -0.025933, -0.022950, -0.020023, -0.019203, -0.015360, -0.015207, -0.026970, -0.021763, -0.021105, -0.038267, -0.028868, -0.021147, -0.036408, -0.030424, -0.024404, -0.043928, -0.033221, -0.033144, -0.029744, -0.012924
#*# 	  -0.071698, -0.059706, -0.053837, -0.041494, -0.044978, -0.032119, -0.020227, -0.034022, -0.021969, -0.013834, -0.025519, -0.026858, -0.029244, -0.033624, -0.038491, -0.043161, -0.032972, -0.022990, -0.043793, -0.038298, -0.031568, -0.045350, -0.037061, -0.028565, -0.018526
#*# 	  -0.071795, -0.070514, -0.065722, -0.057884, -0.050725, -0.050587, -0.039420, -0.029819, -0.043442, -0.033620, -0.026237, -0.045812, -0.041873, -0.038869, -0.055822, -0.046706, -0.043714, -0.042998, -0.045683, -0.048809, -0.048489, -0.048335, -0.049218, -0.037558, -0.025221
#*# 	  -0.078421, -0.072505, -0.071582, -0.067952, -0.062934, -0.048517, -0.038032, -0.049185, -0.039160, -0.033056, -0.050346, -0.044972, -0.041314, -0.059544, -0.057471, -0.049394, -0.051985, -0.050678, -0.050078, -0.053015, -0.053400, -0.058439, -0.048009, -0.041336, -0.029442
#*# 	  -0.082279, -0.072512, -0.072379, -0.071650, -0.059307, -0.067774, -0.055224, -0.044388, -0.048868, -0.047154, -0.048963, -0.053200, -0.056964, -0.063487, -0.065075, -0.064519, -0.072060, -0.061124, -0.049983, -0.071923, -0.060592, -0.050423, -0.059508, -0.047108, -0.037669
#*# 	  -0.092072, -0.079520, -0.075833, -0.072201, -0.072156, -0.064996, -0.060842, -0.057836, -0.055533, -0.055768, -0.068590, -0.059629, -0.054822, -0.071290, -0.069018, -0.065399, -0.071996, -0.063376, -0.054470, -0.072019, -0.062415, -0.052859, -0.059204, -0.050677, -0.041324
#*# 	  -0.098821, -0.090548, -0.085291, -0.078077, -0.072824, -0.072157, -0.070449, -0.065388, -0.064087, -0.056446, -0.071636, -0.065845, -0.069394, -0.072245, -0.075829, -0.071415, -0.072291, -0.072082, -0.071855, -0.069059, -0.069408, -0.069741, -0.071413, -0.062638, -0.051074
#*# 	  -0.112931, -0.104962, -0.100978, -0.093317, -0.077986, -0.083467, -0.074700, -0.072232, -0.072254, -0.072452, -0.072120, -0.072426, -0.076340, -0.078759, -0.080726, -0.080011, -0.083671, -0.076398, -0.072701, -0.078811, -0.073157, -0.072073, -0.073671, -0.072165, -0.059666
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3856315955046634,
#*# 	  1.704784316189037,
#*# 	  0.7555972902416769,
#*# 	  0.36667543624615445,
#*# 	  0.434303362806249,
#*# 	  0.4349327754326395,
#*# 	  -0.2874792938435709,
#*# 	  -0.38445860153829553,
#*# 	  0.31308406285770046,
#*# 	  0.2807313674313839
#*# model_domain = 3.1061274065710475e-07,3.327710933345885e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 71.318711
#*# model_offset = 0.03000
