# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 79.8
shaper_type_x: mzv
shaper_freq_y: 80.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.070205, -0.070489, -0.065983, -0.058649, -0.051669, -0.048184, -0.050821, -0.057503, -0.063480, -0.068599, -0.073225, -0.077473, -0.081337, -0.084618, -0.086687, -0.085022, -0.083156, -0.082926, -0.083878, -0.085338, -0.085174, -0.083759, -0.080985, -0.073312, -0.067468
#*# 	  -0.068374, -0.065283, -0.057965, -0.048951, -0.041217, -0.036571, -0.039133, -0.047218, -0.053471, -0.059570, -0.066172, -0.070356, -0.074316, -0.078449, -0.079442, -0.077627, -0.074585, -0.074569, -0.074806, -0.076078, -0.075662, -0.075384, -0.073661, -0.064893, -0.060952
#*# 	  -0.065468, -0.061546, -0.053494, -0.043970, -0.036225, -0.031124, -0.033276, -0.040129, -0.048084, -0.053920, -0.060121, -0.061466, -0.070550, -0.077888, -0.075245, -0.073517, -0.069837, -0.068927, -0.067930, -0.070386, -0.070886, -0.070946, -0.068632, -0.058443, -0.052871
#*# 	  -0.061547, -0.058298, -0.051305, -0.043562, -0.034876, -0.030026, -0.031748, -0.037994, -0.044001, -0.049277, -0.055655, -0.060989, -0.066308, -0.069482, -0.071318, -0.069075, -0.064773, -0.064273, -0.066424, -0.065518, -0.066516, -0.066730, -0.065112, -0.057737, -0.051989
#*# 	  -0.058624, -0.054780, -0.049013, -0.043668, -0.037549, -0.033197, -0.033489, -0.038092, -0.041685, -0.046516, -0.052361, -0.057798, -0.064338, -0.068338, -0.070075, -0.065933, -0.065736, -0.064318, -0.061727, -0.063220, -0.063182, -0.064456, -0.063069, -0.056001, -0.050383
#*# 	  -0.055399, -0.052551, -0.048641, -0.043624, -0.039722, -0.035752, -0.035452, -0.037904, -0.039710, -0.044032, -0.050260, -0.056184, -0.061486, -0.066454, -0.072685, -0.065582, -0.064076, -0.061441, -0.061148, -0.061651, -0.062013, -0.063680, -0.060270, -0.055787, -0.051119
#*# 	  -0.053971, -0.051009, -0.047090, -0.043391, -0.040820, -0.037926, -0.036792, -0.038561, -0.040036, -0.042898, -0.048117, -0.052843, -0.059951, -0.065388, -0.068036, -0.066683, -0.063712, -0.060409, -0.059240, -0.058705, -0.060370, -0.059270, -0.060156, -0.053957, -0.051259
#*# 	  -0.052783, -0.050771, -0.044882, -0.044619, -0.040477, -0.037224, -0.035624, -0.036770, -0.037053, -0.040206, -0.044927, -0.044501, -0.055489, -0.066325, -0.063505, -0.061651, -0.059165, -0.055619, -0.054985, -0.056116, -0.055764, -0.055925, -0.055622, -0.048410, -0.046227
#*# 	  -0.049845, -0.048085, -0.043239, -0.041685, -0.038289, -0.035113, -0.033317, -0.034854, -0.036361, -0.037246, -0.041100, -0.044189, -0.048267, -0.053998, -0.056669, -0.054838, -0.051864, -0.049353, -0.049337, -0.050652, -0.050576, -0.051611, -0.050515, -0.041078, -0.040797
#*# 	  -0.048039, -0.045006, -0.041852, -0.038678, -0.035926, -0.032494, -0.031215, -0.027088, -0.033663, -0.039983, -0.037108, -0.039873, -0.042566, -0.046715, -0.050098, -0.048438, -0.045216, -0.043298, -0.044142, -0.044415, -0.045596, -0.045807, -0.045118, -0.035540, -0.033148
#*# 	  -0.044613, -0.041367, -0.035871, -0.033610, -0.031542, -0.029396, -0.029003, -0.030459, -0.031192, -0.034585, -0.030828, -0.036480, -0.039050, -0.042671, -0.044034, -0.042226, -0.040045, -0.037849, -0.038332, -0.040232, -0.039684, -0.040655, -0.039941, -0.029740, -0.025879
#*# 	  -0.042703, -0.038773, -0.031497, -0.025690, -0.025484, -0.026783, -0.022681, -0.024035, -0.025372, -0.025807, -0.028402, -0.030827, -0.033463, -0.037109, -0.038859, -0.036813, -0.033996, -0.033586, -0.034355, -0.035439, -0.031435, -0.035263, -0.035749, -0.023074, -0.019010
#*# 	  -0.041508, -0.035356, -0.029733, -0.027405, -0.023711, -0.020740, -0.020120, -0.020952, -0.021454, -0.022757, -0.025928, -0.024070, -0.030872, -0.036605, -0.037195, -0.034143, -0.031639, -0.030456, -0.030156, -0.032644, -0.032018, -0.031763, -0.030805, -0.023738, -0.017185
#*# 	  -0.039127, -0.032177, -0.025789, -0.023963, -0.020250, -0.017522, -0.015632, -0.016275, -0.016270, -0.017256, -0.019580, -0.022418, -0.025144, -0.029271, -0.033779, -0.031339, -0.028845, -0.026786, -0.032241, -0.029145, -0.027865, -0.028335, -0.028354, -0.018443, -0.012876
#*# 	  -0.038994, -0.034698, -0.027429, -0.024151, -0.021187, -0.018495, -0.017299, -0.016946, -0.015657, -0.015375, -0.017997, -0.019757, -0.021603, -0.025680, -0.030413, -0.026100, -0.025944, -0.026139, -0.025522, -0.027250, -0.026906, -0.027479, -0.025140, -0.016670, -0.015363
#*# 	  -0.040010, -0.035844, -0.028919, -0.025731, -0.023222, -0.021202, -0.019193, -0.018748, -0.016962, -0.016441, -0.018024, -0.019322, -0.021520, -0.025730, -0.028620, -0.021472, -0.023671, -0.027140, -0.022777, -0.025672, -0.026026, -0.027100, -0.025762, -0.016648, -0.014212
#*# 	  -0.044405, -0.039886, -0.033954, -0.030184, -0.027917, -0.025378, -0.024336, -0.023985, -0.023114, -0.022123, -0.024337, -0.025624, -0.028326, -0.030852, -0.033607, -0.032008, -0.027682, -0.025527, -0.027584, -0.027485, -0.030340, -0.034644, -0.030777, -0.021884, -0.021311
#*# 	  -0.052556, -0.047220, -0.041535, -0.037559, -0.035003, -0.033160, -0.032404, -0.032040, -0.031344, -0.030606, -0.032283, -0.028997, -0.036937, -0.045408, -0.041211, -0.037829, -0.033811, -0.030785, -0.032846, -0.035209, -0.036385, -0.036183, -0.033564, -0.026229, -0.022577
#*# 	  -0.059047, -0.055273, -0.048913, -0.045136, -0.042290, -0.040231, -0.038883, -0.039073, -0.037544, -0.038264, -0.040243, -0.042709, -0.045643, -0.048964, -0.050290, -0.046526, -0.041357, -0.038159, -0.039727, -0.042489, -0.042605, -0.043531, -0.042471, -0.032577, -0.030812
#*# 	  -0.068915, -0.064366, -0.057280, -0.054037, -0.050444, -0.049406, -0.047337, -0.043728, -0.047025, -0.052067, -0.049775, -0.052245, -0.054294, -0.056264, -0.057075, -0.052419, -0.047337, -0.044340, -0.045484, -0.047346, -0.047782, -0.048951, -0.047454, -0.037924, -0.033615
#*# 	  -0.076646, -0.072812, -0.066633, -0.062571, -0.059670, -0.056938, -0.055382, -0.053648, -0.054366, -0.056787, -0.058163, -0.060150, -0.062101, -0.064118, -0.065389, -0.060605, -0.055094, -0.051924, -0.052683, -0.054341, -0.053315, -0.053683, -0.051582, -0.043219, -0.038214
#*# 	  -0.078212, -0.074831, -0.068921, -0.065217, -0.063251, -0.063401, -0.059407, -0.059196, -0.058524, -0.058862, -0.062072, -0.064182, -0.065164, -0.067350, -0.067904, -0.064115, -0.059089, -0.055386, -0.054828, -0.055222, -0.054344, -0.054579, -0.051563, -0.043440, -0.036050
#*# 	  -0.084160, -0.081804, -0.075767, -0.072226, -0.069314, -0.068024, -0.066323, -0.065765, -0.063922, -0.064829, -0.067731, -0.065496, -0.071110, -0.079131, -0.075128, -0.072006, -0.067466, -0.064328, -0.062439, -0.062614, -0.061850, -0.062224, -0.056182, -0.047855, -0.041006
#*# 	  -0.091200, -0.089382, -0.083655, -0.080099, -0.078878, -0.076606, -0.074575, -0.074178, -0.072663, -0.072573, -0.074880, -0.075740, -0.077450, -0.079780, -0.079940, -0.077580, -0.073516, -0.069257, -0.065138, -0.065388, -0.064092, -0.065111, -0.062123, -0.052020, -0.046295
#*# 	  -0.102144, -0.098822, -0.093746, -0.091481, -0.089457, -0.086987, -0.084922, -0.082314, -0.077970, -0.077973, -0.081419, -0.084375, -0.086453, -0.087644, -0.087322, -0.079022, -0.078688, -0.074322, -0.071841, -0.070067, -0.068989, -0.066790, -0.063932, -0.054976, -0.050459
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	  1.7354079221972734,
#*# 	  0.7630322078872325,
#*# 	  0.3972884925633777,
#*# 	  0.37849463200726147,
#*# 	  0.3169570227532607,
#*# 	  -0.2360704257340257,
#*# 	  -0.2840356980838786,
#*# 	  0.2759119913545306,
#*# 	  0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = -0.42000
