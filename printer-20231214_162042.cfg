[include moonraker_obico_macros.cfg]
# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 60000  
max_accel: 60000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 100

[input_shaper]
shaper_freq_x: 74.2
shaper_type_x: mzv
shaper_freq_y: 75.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.060413, -0.053200, -0.046492, -0.039402, -0.032765, -0.030359, -0.026627, -0.023840, -0.026642, -0.026505, -0.031263, -0.035825, -0.041353, -0.046340, -0.049426, -0.048862, -0.046815, -0.046978, -0.047349, -0.050622, -0.053358, -0.055317, -0.054037, -0.055796, -0.061767
#*# 	  -0.053486, -0.047754, -0.040925, -0.034463, -0.026691, -0.023314, -0.019937, -0.018078, -0.020752, -0.016636, -0.023739, -0.029017, -0.033244, -0.042179, -0.042016, -0.040447, -0.040243, -0.039709, -0.037800, -0.041444, -0.043723, -0.046716, -0.050951, -0.051544, -0.052274
#*# 	  -0.046355, -0.039231, -0.033502, -0.026214, -0.018624, -0.014041, -0.011739, -0.009099, -0.008665, -0.009429, -0.012881, -0.020267, -0.025626, -0.030857, -0.033451, -0.032887, -0.030876, -0.030047, -0.031722, -0.031634, -0.037371, -0.041571, -0.040902, -0.046124, -0.045101
#*# 	  -0.047639, -0.038839, -0.033227, -0.024368, -0.017583, -0.012497, -0.006729, -0.002302, -0.007691, -0.004302, -0.006255, -0.018229, -0.022318, -0.023992, -0.034510, -0.030379, -0.025750, -0.028229, -0.027681, -0.025791, -0.033397, -0.034560, -0.037635, -0.039788, -0.040300
#*# 	  -0.046840, -0.036807, -0.031777, -0.021489, -0.018571, -0.010970, -0.008118, -0.004936, -0.000126, -0.004474, -0.007716, -0.013340, -0.019866, -0.025326, -0.029566, -0.028751, -0.027970, -0.025188, -0.029594, -0.026499, -0.028208, -0.032546, -0.032289, -0.037656, -0.039044
#*# 	  -0.045065, -0.038136, -0.029384, -0.025443, -0.019032, -0.007709, -0.010465, -0.002965, -0.000502, -0.005757, -0.007877, -0.013702, -0.021829, -0.021959, -0.032788, -0.030179, -0.024489, -0.029670, -0.026733, -0.022602, -0.027096, -0.027966, -0.030525, -0.032280, -0.034348
#*# 	  -0.043432, -0.036208, -0.030976, -0.023498, -0.018837, -0.009445, -0.007015, -0.003962, -0.000304, -0.002366, -0.006415, -0.010175, -0.016582, -0.021744, -0.026256, -0.027399, -0.024678, -0.024797, -0.024464, -0.023029, -0.025139, -0.026661, -0.028349, -0.028614, -0.033097
#*# 	  -0.041620, -0.037822, -0.031150, -0.023796, -0.020713, -0.008482, -0.006796, -0.003900, 0.003136, -0.003725, -0.004592, -0.005498, -0.014348, -0.018994, -0.020728, -0.026267, -0.023147, -0.015647, -0.024861, -0.020090, -0.019343, -0.020878, -0.022517, -0.025890, -0.028239
#*# 	  -0.047622, -0.038735, -0.033180, -0.027598, -0.020888, -0.012999, -0.010290, -0.004518, -0.002223, -0.002620, -0.003370, -0.007517, -0.010010, -0.012064, -0.018737, -0.018972, -0.016037, -0.018485, -0.017058, -0.014177, -0.016792, -0.020090, -0.019380, -0.023604, -0.027601
#*# 	  -0.044136, -0.037209, -0.030538, -0.023272, -0.016808, -0.010987, -0.002279, -0.009344, -0.000651, 0.004622, -0.005244, -0.001155, -0.002419, -0.011444, -0.011025, -0.011784, -0.012832, -0.005006, -0.015358, -0.014282, -0.010016, -0.019458, -0.015315, -0.018663, -0.021122
#*# 	  -0.041862, -0.032003, -0.027880, -0.021454, -0.015324, -0.007521, -0.004519, 0.000190, -0.000419, 0.001350, 0.003241, 0.003113, 0.002083, -0.001256, -0.003571, -0.004459, -0.004201, -0.005540, -0.003890, -0.012680, -0.006398, -0.007139, -0.009625, -0.013565, -0.016035
#*# 	  -0.039264, -0.031490, -0.025345, -0.018271, -0.012055, -0.005655, 0.000341, 0.002701, 0.004840, 0.007979, 0.001014, 0.004903, 0.005443, -0.001370, -0.002837, 0.001708, -0.005280, -0.002688, 0.000902, -0.006587, -0.000069, -0.000732, -0.003420, -0.007249, -0.007369
#*# 	  -0.042946, -0.033611, -0.027469, -0.018482, -0.011898, -0.004005, 0.003561, -0.000580, 0.005879, 0.006457, 0.001544, 0.003035, 0.002663, -0.001872, -0.002171, -0.000545, -0.004998, -0.004536, -0.004484, -0.007224, -0.000948, -0.002328, -0.002379, -0.004787, -0.008962
#*# 	  -0.041715, -0.033162, -0.027778, -0.018887, -0.009897, -0.005805, 0.003117, 0.008650, 0.005166, 0.007222, 0.009683, 0.004397, 0.006204, 0.006962, -0.007833, -0.002468, -0.000894, -0.008407, 0.004946, -0.002159, 0.002740, 0.000577, -0.000433, -0.003872, -0.007081
#*# 	  -0.043019, -0.035231, -0.029548, -0.018575, -0.013038, -0.004534, 0.003672, 0.001882, 0.009507, 0.008220, 0.004481, 0.013471, 0.008297, 0.006000, 0.004889, -0.002779, -0.000382, 0.006378, -0.007884, 0.000818, 0.004743, -0.002801, -0.000817, -0.003224, -0.003605
#*# 	  -0.049285, -0.040333, -0.033398, -0.026813, -0.018081, -0.008632, -0.007673, 0.000360, 0.007002, 0.003648, 0.005215, 0.006439, 0.005282, 0.005952, -0.005222, -0.002147, 0.000595, -0.010492, -0.004402, -0.000330, -0.006607, -0.003663, -0.006278, -0.007448, -0.011091
#*# 	  -0.055875, -0.045093, -0.042437, -0.033451, -0.025901, -0.016600, -0.013518, -0.006902, 0.000025, -0.003517, -0.000934, 0.000694, -0.003632, -0.004204, -0.004699, -0.008081, -0.008700, -0.009703, -0.011564, -0.008178, -0.012052, -0.013191, -0.012881, -0.014164, -0.016045
#*# 	  -0.063298, -0.056384, -0.051136, -0.041998, -0.034761, -0.024563, -0.021753, -0.015466, -0.007296, -0.010003, -0.008877, -0.003607, -0.011448, -0.012412, -0.010580, -0.016502, -0.013068, -0.005589, -0.019827, -0.013076, -0.012786, -0.017436, -0.018447, -0.019147, -0.019910
#*# 	  -0.070464, -0.064062, -0.057605, -0.049029, -0.041121, -0.033527, -0.027746, -0.022838, -0.016439, -0.015229, -0.014698, -0.015224, -0.014268, -0.016368, -0.019506, -0.019383, -0.013664, -0.021467, -0.017190, -0.014173, -0.018827, -0.020637, -0.019233, -0.019298, -0.019297
#*# 	  -0.087005, -0.078840, -0.071712, -0.063582, -0.053603, -0.045441, -0.037221, -0.034542, -0.028513, -0.025064, -0.028418, -0.025424, -0.027374, -0.036699, -0.029615, -0.030760, -0.025872, -0.019250, -0.030141, -0.023443, -0.023297, -0.027106, -0.026541, -0.025581, -0.026862
#*# 	  -0.088066, -0.080518, -0.075327, -0.066830, -0.056917, -0.048952, -0.042995, -0.038632, -0.032829, -0.030436, -0.030210, -0.031769, -0.031307, -0.033897, -0.038612, -0.031255, -0.030461, -0.028606, -0.023780, -0.028131, -0.028137, -0.028639, -0.029366, -0.027506, -0.024977
#*# 	  -0.097131, -0.088489, -0.080651, -0.071804, -0.064286, -0.057624, -0.049164, -0.043669, -0.038349, -0.038334, -0.039307, -0.036991, -0.037942, -0.045695, -0.044239, -0.038683, -0.038803, -0.035431, -0.031024, -0.031859, -0.032054, -0.030577, -0.031844, -0.029761, -0.025437
#*# 	  -0.099418, -0.093302, -0.086774, -0.076864, -0.068515, -0.062228, -0.055510, -0.049248, -0.043558, -0.040239, -0.042738, -0.041421, -0.040965, -0.048225, -0.047211, -0.041763, -0.042464, -0.040501, -0.035145, -0.033376, -0.033509, -0.030805, -0.030147, -0.027437, -0.025757
#*# 	  -0.108060, -0.098928, -0.093024, -0.084255, -0.075472, -0.068487, -0.061421, -0.055208, -0.049835, -0.050240, -0.051334, -0.050706, -0.052898, -0.055132, -0.057878, -0.053756, -0.051503, -0.048387, -0.043046, -0.040201, -0.037576, -0.036054, -0.036099, -0.033433, -0.030402
#*# 	  -0.119081, -0.110123, -0.104608, -0.094617, -0.085135, -0.077909, -0.071663, -0.064127, -0.059665, -0.060045, -0.059314, -0.059165, -0.062675, -0.064562, -0.062165, -0.062394, -0.058842, -0.054092, -0.057638, -0.050832, -0.043434, -0.057416, -0.049532, -0.040579, -0.010875
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3871469692285694,
#*# 	  1.7018843533962391,
#*# 	  0.7352463261196153,
#*# 	  0.25995958544519904,
#*# 	  0.4531182445962844,
#*# 	  0.7999166893134559,
#*# 	  -0.2875150088104918,
#*# 	  -0.8304625502251882,
#*# 	  0.31189499026426176,
#*# 	  0.4697786323654906
#*# model_domain = 3.0970228935312625e-07,3.3288853709570106e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 84.547079
#*# model_offset = 0.00000
