[include moonraker_obico_macros.cfg]
# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]
#[include adxlmcu.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 60000  
max_accel: 60000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 20

[input_shaper]
shaper_freq_x: 64.0
shaper_type_x: mzv
shaper_freq_y: 68.2
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.037972, -0.030343, -0.025746, -0.023076, -0.018325, -0.015419, -0.014526, -0.014107, -0.015554, -0.018338, -0.023202, -0.027953, -0.031695, -0.036327, -0.038474, -0.038474, -0.034871, -0.033614, -0.033631, -0.034409, -0.035746, -0.036202, -0.036474, -0.033766, -0.035420
#*# 	-0.029452, -0.027037, -0.022426, -0.016709, -0.013590, -0.005125, -0.008216, -0.007125, -0.003618, -0.009832, -0.014206, -0.019609, -0.024267, -0.028674, -0.030850, -0.029913, -0.026805, -0.029083, -0.024362, -0.023701, -0.025394, -0.025755, -0.026770, -0.026000, -0.023626
#*# 	-0.024038, -0.017672, -0.014977, -0.008895, -0.004138, -0.001723, 0.001043, 0.001136, 0.000929, -0.001050, -0.006270, -0.011261, -0.017280, -0.022302, -0.025124, -0.023066, -0.021774, -0.017983, -0.018536, -0.017544, -0.018995, -0.019268, -0.021345, -0.021382, -0.019182
#*# 	-0.020749, -0.018284, -0.013146, -0.002057, -0.003165, 0.003066, 0.003884, 0.004934, 0.006018, -0.000495, -0.001657, -0.003244, -0.016660, -0.018137, -0.018465, -0.022810, -0.017557, -0.011227, -0.016980, -0.010783, -0.012978, -0.014174, -0.016404, -0.015507, -0.016266
#*# 	-0.021801, -0.015197, -0.010625, -0.005809, -0.001619, 0.001357, 0.005552, 0.007025, 0.006420, 0.005764, 0.002156, -0.006395, -0.010427, -0.014650, -0.019609, -0.019213, -0.014000, -0.012417, -0.012265, -0.009024, -0.013240, -0.013446, -0.014336, -0.014297, -0.014049
#*# 	-0.021238, -0.019491, -0.014778, -0.003536, -0.005301, 0.000464, 0.006554, 0.003184, 0.006774, 0.007340, -0.002424, -0.004466, -0.008955, -0.016856, -0.020366, -0.021247, -0.017396, -0.012218, -0.014194, -0.008394, -0.011338, -0.012532, -0.013511, -0.014305, -0.013365
#*# 	-0.025557, -0.020446, -0.017280, -0.010590, -0.004904, -0.003776, 0.000965, 0.005380, 0.005054, 0.002191, 0.000344, -0.004337, -0.010492, -0.017523, -0.020462, -0.021043, -0.019713, -0.013538, -0.011460, -0.011224, -0.013214, -0.013824, -0.012750, -0.014503, -0.013463
#*# 	-0.026164, -0.022073, -0.020932, -0.010514, -0.006195, -0.006733, 0.001492, 0.003043, 0.006035, 0.003702, 0.000300, -0.001773, -0.009124, -0.018746, -0.016727, -0.013773, -0.017847, -0.011392, -0.006003, -0.007690, -0.007777, -0.008184, -0.009319, -0.011247, -0.010858
#*# 	-0.027555, -0.022653, -0.020545, -0.015018, -0.011477, -0.004293, 0.001529, -0.000373, 0.003767, 0.007180, -0.000016, 0.000531, 0.001288, -0.010834, -0.012110, -0.007349, -0.008831, -0.008148, -0.005979, -0.004960, -0.004648, -0.006967, -0.005130, -0.007446, -0.007572
#*# 	-0.030819, -0.024967, -0.020969, -0.014215, -0.011049, -0.009292, 0.000256, 0.006388, -0.001538, 0.003155, 0.007764, -0.001613, 0.000577, 0.002633, -0.010263, -0.005633, 0.000752, -0.002982, -0.001982, -0.001205, 0.001115, -0.003046, 0.000439, -0.004522, -0.001819
#*# 	-0.028584, -0.020816, -0.018448, -0.011706, -0.006524, -0.002550, 0.001950, 0.003858, 0.005009, 0.005060, 0.005917, 0.006372, 0.002111, 0.001778, 0.004649, -0.003180, 0.000179, 0.005672, 0.002272, 0.001643, 0.005733, 0.003896, 0.005752, 0.003094, 0.004374
#*# 	-0.025869, -0.021410, -0.015169, -0.012465, -0.003768, 0.005468, 0.002231, 0.007770, 0.012791, 0.003895, 0.007557, 0.009351, 0.007679, 0.004551, 0.004668, 0.003000, 0.004608, 0.002954, 0.007233, 0.009501, 0.011092, 0.005973, 0.010740, 0.006764, 0.010463
#*# 	-0.028275, -0.020789, -0.015830, -0.009379, -0.004707, 0.002013, 0.005860, 0.009084, 0.011071, 0.006878, 0.009018, 0.009404, 0.006802, 0.004418, 0.002620, 0.002618, 0.003629, 0.003817, 0.007086, 0.008630, 0.011004, 0.009603, 0.012855, 0.009555, 0.014047
#*# 	-0.029113, -0.024301, -0.017500, -0.006187, -0.007154, 0.000872, 0.007776, 0.010122, 0.011851, 0.005836, 0.010324, 0.015915, 0.003767, 0.005219, 0.008839, -0.002670, 0.005740, 0.012670, 0.004029, 0.011803, 0.015569, 0.010012, 0.016018, 0.012852, 0.013904
#*# 	-0.030028, -0.022908, -0.019554, -0.013352, -0.006362, 0.000245, 0.007145, 0.009248, 0.011459, 0.013704, 0.014582, 0.010933, 0.012824, 0.011431, 0.002667, 0.006398, 0.009906, 0.010070, 0.008844, 0.012607, 0.012670, 0.012878, 0.014039, 0.012558, 0.019285
#*# 	-0.033193, -0.027535, -0.021235, -0.012918, -0.012578, -0.001787, 0.008906, 0.003282, 0.011074, 0.016143, 0.007341, 0.013151, 0.015789, 0.008658, 0.006994, 0.006342, 0.008772, 0.010128, 0.007985, 0.013262, 0.011852, 0.007071, 0.011781, 0.012962, 0.013411
#*# 	-0.042142, -0.034490, -0.029396, -0.022831, -0.016823, -0.012219, -0.004099, 0.000864, 0.002813, 0.005214, 0.005103, 0.006010, 0.004570, 0.001930, 0.000044, 0.003796, 0.002962, 0.005519, 0.006029, 0.005493, 0.003527, 0.004744, 0.004773, 0.005651, 0.008568
#*# 	-0.051911, -0.046112, -0.042613, -0.030767, -0.028694, -0.022037, -0.012141, -0.007385, -0.005025, -0.003574, -0.004714, -0.002362, -0.004570, -0.009446, -0.007271, -0.002912, -0.003721, 0.000259, 0.001513, 0.003277, -0.000902, -0.001631, 0.000468, 0.001483, 0.005307
#*# 	-0.060969, -0.053061, -0.048119, -0.040503, -0.033554, -0.028067, -0.019915, -0.016024, -0.010897, -0.007591, -0.012197, -0.010583, -0.008430, -0.016459, -0.012032, -0.008497, -0.006668, -0.005886, -0.005164, -0.002398, -0.005384, -0.004459, -0.003822, -0.001741, 0.005974
#*# 	-0.069226, -0.062996, -0.057391, -0.046406, -0.043969, -0.034781, -0.026096, -0.023448, -0.020115, -0.019253, -0.017509, -0.020080, -0.020331, -0.018477, -0.021422, -0.017734, -0.011904, -0.010531, -0.009549, -0.006027, -0.009082, -0.007389, -0.006323, -0.003938, 0.007015
#*# 	-0.079029, -0.068225, -0.063041, -0.053598, -0.046222, -0.042224, -0.033461, -0.028900, -0.024992, -0.024826, -0.024720, -0.022571, -0.027373, -0.026813, -0.024705, -0.024876, -0.019109, -0.014324, -0.015620, -0.011830, -0.013359, -0.012646, -0.010516, -0.008248, -0.001426
#*# 	-0.076690, -0.070331, -0.064947, -0.056934, -0.052485, -0.043810, -0.035656, -0.034503, -0.027443, -0.028734, -0.027644, -0.023485, -0.027604, -0.030723, -0.028833, -0.027706, -0.022717, -0.022773, -0.017817, -0.013790, -0.012682, -0.011842, -0.009045, -0.007421, 0.002344
#*# 	-0.081674, -0.074311, -0.069737, -0.061981, -0.054492, -0.050731, -0.042409, -0.037886, -0.032539, -0.032238, -0.032127, -0.030027, -0.032972, -0.036509, -0.034565, -0.032343, -0.030532, -0.025014, -0.020398, -0.017808, -0.015796, -0.012013, -0.009811, -0.006124, 0.005385
#*# 	-0.083627, -0.078004, -0.075713, -0.066675, -0.061041, -0.053733, -0.046138, -0.042925, -0.036893, -0.035963, -0.037275, -0.036143, -0.040469, -0.041900, -0.040201, -0.039976, -0.036042, -0.030607, -0.026358, -0.020863, -0.018724, -0.015344, -0.011482, -0.007669, 0.003295
#*# 	-0.098912, -0.089658, -0.084111, -0.077432, -0.069043, -0.062654, -0.055616, -0.049940, -0.046601, -0.044009, -0.045242, -0.049220, -0.047676, -0.051283, -0.052358, -0.047393, -0.043647, -0.038167, -0.034290, -0.031340, -0.025261, -0.027130, -0.021006, -0.012950, 0.019372
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.385876254765473,
#*# 	  1.7120601985446877,
#*# 	  0.8029678797063172,
#*# 	  0.3462111117639945,
#*# 	  0.22711500178657737,
#*# 	  0.4328912103898074,
#*# 	  0.005345012238235386,
#*# 	  -0.35350207577104786,
#*# 	  0.1784947190176321,
#*# 	  0.26356755137352766
#*# model_domain = 3.1119827682053487e-07,3.3312039213221814e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 97.549727
#*# model_offset = 0.00000
