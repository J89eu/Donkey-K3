# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]

# Uncomment when using a pico pi with ADXL 
[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 68.0
shaper_type_x: mzv
shaper_freq_y: 65.2
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 125
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.065163, -0.065354, -0.057924, -0.062019, -0.066589, -0.063292, -0.069729, -0.075965, -0.080301, -0.085344, -0.092876, -0.096252, -0.098958, -0.100343, -0.101757, -0.099077, -0.093334, -0.092407, -0.092685, -0.086296, -0.085030, -0.081934, -0.075787, -0.069078, -0.053537
#*# 	  -0.047108, -0.049721, -0.043254, -0.057800, -0.051726, -0.051961, -0.057809, -0.062591, -0.074162, -0.073234, -0.071941, -0.093012, -0.090623, -0.086641, -0.098431, -0.089899, -0.078161, -0.086403, -0.078082, -0.069768, -0.079399, -0.068524, -0.059866, -0.055934, -0.037428
#*# 	  -0.042117, -0.041596, -0.046396, -0.039492, -0.043387, -0.044092, -0.047817, -0.054507, -0.057100, -0.063227, -0.071223, -0.073179, -0.080740, -0.086242, -0.081084, -0.080214, -0.077044, -0.069488, -0.068660, -0.067191, -0.063888, -0.062731, -0.059453, -0.054286, -0.035729
#*# 	  -0.034363, -0.030621, -0.043138, -0.038531, -0.030809, -0.046648, -0.041814, -0.037127, -0.057243, -0.054674, -0.053441, -0.073672, -0.073031, -0.077050, -0.076783, -0.067759, -0.073999, -0.063543, -0.051685, -0.062701, -0.057259, -0.046736, -0.061676, -0.044599, -0.025126
#*# 	  -0.030381, -0.029010, -0.034515, -0.027665, -0.032376, -0.034487, -0.034328, -0.041034, -0.043679, -0.049115, -0.056780, -0.062126, -0.067229, -0.072108, -0.075127, -0.060475, -0.062015, -0.057994, -0.055302, -0.055274, -0.055000, -0.052277, -0.051519, -0.046096, -0.026491
#*# 	  -0.025736, -0.022053, -0.029464, -0.032447, -0.040069, -0.032411, -0.025441, -0.048251, -0.041396, -0.036298, -0.063024, -0.058433, -0.056215, -0.074779, -0.068220, -0.059068, -0.063231, -0.051967, -0.045502, -0.042236, -0.042575, -0.043775, -0.049459, -0.031006, -0.021197
#*# 	  -0.023257, -0.020065, -0.025077, -0.027957, -0.025120, -0.027149, -0.030947, -0.032367, -0.034551, -0.038390, -0.045246, -0.051855, -0.056132, -0.060844, -0.063970, -0.058624, -0.054519, -0.052823, -0.036647, -0.040689, -0.041519, -0.039152, -0.035936, -0.034434, -0.017563
#*# 	  -0.020036, -0.027525, -0.022237, -0.018812, -0.032743, -0.023716, -0.016052, -0.035740, -0.028817, -0.034058, -0.040916, -0.035713, -0.058728, -0.053201, -0.045820, -0.055398, -0.046277, -0.037728, -0.035968, -0.030053, -0.027952, -0.025194, -0.029620, -0.017717, -0.006277
#*# 	  -0.016330, -0.019205, -0.020135, -0.022827, -0.022502, -0.020493, -0.021535, -0.023438, -0.023689, -0.026417, -0.031427, -0.034487, -0.038393, -0.044494, -0.045437, -0.041876, -0.038861, -0.034725, -0.029504, -0.020878, -0.025398, -0.022898, -0.020558, -0.019721, -0.010213
#*# 	  -0.011750, -0.014052, -0.007140, -0.023857, -0.015909, -0.007073, -0.024685, -0.020374, -0.013167, -0.032522, -0.027464, -0.018979, -0.038672, -0.035581, -0.026035, -0.030712, -0.027296, -0.026824, -0.017762, -0.012837, -0.009690, -0.007869, -0.004430, -0.026379, 0.005951
#*# 	  -0.007145, -0.009966, -0.010288, -0.012293, -0.011743, -0.011264, -0.012739, -0.016382, -0.017814, -0.018854, -0.020615, -0.024045, -0.026413, -0.027327, -0.029199, -0.024135, -0.021002, -0.018201, -0.013843, -0.007606, -0.008714, -0.005249, -0.004293, -0.011306, 0.007836
#*# 	  -0.005314, -0.007247, -0.001840, -0.013833, -0.006192, -0.004509, -0.005825, -0.002552, -0.021073, -0.013074, -0.009319, -0.026134, -0.020501, -0.016265, -0.035340, -0.021415, -0.010554, -0.014283, -0.003963, 0.001626, 0.006293, 0.009438, 0.005360, -0.004698, 0.023688
#*# 	  -0.001411, -0.002371, -0.003371, -0.002518, -0.002200, -0.000483, -0.002925, -0.004276, -0.005924, -0.006969, -0.008122, -0.014960, -0.016787, -0.017549, -0.022615, -0.017422, -0.010931, -0.006940, -0.000012, 0.001898, 0.005073, 0.008187, 0.009152, -0.007085, 0.020109
#*# 	  0.000861, -0.001481, -0.002822, -0.001392, 0.005800, -0.003469, 0.005190, 0.011167, -0.010501, -0.001022, 0.002643, -0.008592, -0.010732, -0.022473, -0.018421, -0.005562, -0.012541, -0.001258, 0.007626, 0.011436, 0.014371, 0.016797, 0.007701, 0.001211, 0.028066
#*# 	  0.001389, 0.000859, 0.002113, 0.002818, 0.003004, 0.004087, 0.003653, 0.003330, 0.005643, -0.002244, -0.001642, -0.000440, -0.007505, -0.011276, -0.011651, -0.011395, -0.003476, 0.001231, 0.008933, 0.009051, 0.011638, 0.013867, 0.014722, 0.004183, 0.025475
#*# 	  0.001443, -0.000340, 0.000202, 0.002929, -0.001632, 0.006215, 0.014494, -0.006848, 0.003136, 0.011746, -0.009343, -0.002364, 0.000974, -0.018847, -0.014607, -0.001639, -0.006441, 0.005830, 0.012858, 0.015426, 0.017072, 0.019277, 0.008116, 0.023659, 0.024592
#*# 	  -0.004146, -0.001890, -0.004124, -0.003202, -0.003488, -0.002252, -0.000045, -0.005841, -0.004465, 0.000438, -0.011274, -0.009657, -0.013388, -0.017967, -0.017781, -0.014338, -0.008628, -0.003271, 0.004178, 0.004899, 0.004542, 0.007670, 0.000332, 0.010104, 0.017879
#*# 	  -0.009779, -0.012223, -0.011270, -0.008962, -0.013639, -0.005158, 0.003791, -0.009547, -0.009590, -0.023797, -0.015336, -0.006306, -0.031618, -0.024057, -0.016174, -0.024374, -0.012534, -0.002304, -0.000200, 0.003205, 0.005080, 0.004779, -0.005167, 0.013094, 0.022612
#*# 	  -0.016608, -0.017029, -0.015785, -0.015628, -0.014247, -0.014861, -0.015836, -0.023313, -0.017310, -0.012753, -0.025754, -0.024378, -0.024408, -0.031857, -0.029723, -0.024390, -0.018150, -0.012313, -0.007883, -0.006334, -0.006860, -0.006243, -0.014744, 0.000066, 0.010081
#*# 	  -0.027252, -0.028345, -0.026832, -0.026098, -0.024719, -0.014764, -0.030816, -0.025196, -0.015397, -0.036410, -0.031449, -0.024804, -0.043109, -0.037767, -0.038001, -0.032139, -0.024180, -0.018740, -0.012868, -0.010246, -0.013724, -0.012169, -0.002884, -0.018298, 0.010845
#*# 	  -0.033043, -0.033173, -0.033488, -0.031329, -0.030279, -0.029579, -0.028848, -0.029018, -0.036307, -0.032619, -0.032163, -0.043171, -0.039807, -0.040112, -0.044443, -0.037791, -0.031659, -0.025880, -0.021064, -0.019175, -0.021180, -0.016149, -0.026347, -0.012173, 0.004276
#*# 	  -0.039791, -0.041088, -0.043006, -0.042429, -0.040430, -0.040969, -0.037436, -0.033197, -0.048014, -0.038700, -0.036029, -0.051976, -0.047031, -0.044769, -0.054015, -0.044958, -0.039447, -0.032944, -0.027617, -0.023152, -0.027132, -0.025393, -0.028454, -0.013394, 0.004852
#*# 	  -0.045679, -0.046872, -0.048363, -0.050228, -0.048935, -0.042524, -0.050766, -0.049841, -0.045006, -0.049080, -0.046694, -0.061387, -0.057104, -0.054345, -0.063596, -0.054792, -0.048358, -0.043047, -0.039154, -0.034105, -0.041718, -0.029440, -0.021460, -0.015977, 0.000761
#*# 	  -0.053705, -0.054862, -0.057918, -0.059876, -0.056159, -0.054951, -0.053304, -0.050097, -0.064606, -0.058127, -0.063136, -0.065995, -0.059575, -0.076806, -0.069737, -0.062417, -0.064052, -0.054494, -0.044834, -0.051445, -0.041069, -0.031182, -0.025917, -0.019411, -0.008796
#*# 	  -0.067819, -0.069451, -0.070139, -0.069801, -0.067238, -0.060389, -0.066142, -0.064522, -0.060304, -0.074761, -0.074675, -0.073472, -0.086510, -0.082605, -0.077898, -0.081830, -0.074283, -0.066834, -0.063765, -0.055729, -0.051772, -0.043270, -0.038462, -0.029771, -0.017864
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4387166651381682,
#*# 	  1.7622644381349564,
#*# 	  0.7806514646146505,
#*# 	  0.3655146126519269,
#*# 	  0.25766803039234565,
#*# 	  0.2753488978315985,
#*# 	  -0.06057316389846643,
#*# 	  -0.16051734548468966,
#*# 	  0.18453799090961032,
#*# 	  0.15908259441267797
#*# model_domain = 3.1611833481542485e-07,3.331746089304897e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 42.749672
#*# model_offset = -0.20000
