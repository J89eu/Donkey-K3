# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 70.8
shaper_type_x: mzv
shaper_freq_y: 83.6
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 125
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.065301, -0.065875, -0.062843, -0.066566, -0.060809, -0.059257, -0.070392, -0.053228, -0.067210, -0.082148, -0.066203, -0.078465, -0.090890, -0.075749, -0.084076, -0.079662, -0.068731, -0.078081, -0.070704, -0.063874, -0.068369, -0.062811, -0.056220, -0.051729, -0.044213
#*# 	  -0.057870, -0.055638, -0.053289, -0.051169, -0.046630, -0.048664, -0.052950, -0.046865, -0.054930, -0.066666, -0.053032, -0.066952, -0.070797, -0.066421, -0.080858, -0.068323, -0.057226, -0.064448, -0.056612, -0.053343, -0.053662, -0.047425, -0.046531, -0.045541, -0.037501
#*# 	  -0.051802, -0.049472, -0.045456, -0.041906, -0.040463, -0.037797, -0.039538, -0.043208, -0.046526, -0.042390, -0.053277, -0.063053, -0.053898, -0.063979, -0.063852, -0.054560, -0.058841, -0.051920, -0.046054, -0.047232, -0.044423, -0.042551, -0.042940, -0.040299, -0.024520
#*# 	  -0.040799, -0.041983, -0.039377, -0.034348, -0.034913, -0.023954, -0.031738, -0.041636, -0.025777, -0.038392, -0.050447, -0.038217, -0.053227, -0.055212, -0.047389, -0.059942, -0.044770, -0.038275, -0.043787, -0.037701, -0.036778, -0.037583, -0.029286, -0.024749, -0.015915
#*# 	  -0.038417, -0.030201, -0.029121, -0.026434, -0.023827, -0.021029, -0.022633, -0.029798, -0.022292, -0.031433, -0.038190, -0.038506, -0.044573, -0.046919, -0.044358, -0.046504, -0.044313, -0.036100, -0.038660, -0.030124, -0.029735, -0.026968, -0.025331, -0.022746, -0.010808
#*# 	  -0.027217, -0.024912, -0.029107, -0.023242, -0.020888, -0.024286, -0.011147, -0.021234, -0.034171, -0.014702, -0.031171, -0.050342, -0.032329, -0.046871, -0.047648, -0.036918, -0.049961, -0.033629, -0.020149, -0.038032, -0.024207, -0.018598, -0.012687, -0.010783, -0.002311
#*# 	  -0.029658, -0.022086, -0.021176, -0.016454, -0.016271, -0.013567, -0.016008, -0.012854, -0.017414, -0.024152, -0.023234, -0.033324, -0.037033, -0.039289, -0.045951, -0.039307, -0.034585, -0.035529, -0.026432, -0.022900, -0.020859, -0.014655, -0.010228, -0.010389, -0.001272
#*# 	  -0.018921, -0.018188, -0.012562, -0.019080, -0.013122, -0.009847, -0.019014, -0.000997, -0.012809, -0.026674, -0.009812, -0.026328, -0.041277, -0.021796, -0.041985, -0.031174, -0.015446, -0.033486, -0.017786, -0.004790, -0.016383, -0.003242, 0.002470, 0.005385, 0.010496
#*# 	  -0.019968, -0.018330, -0.011724, -0.010640, -0.007998, -0.004812, -0.004133, -0.007585, -0.011576, -0.008700, -0.014899, -0.018362, -0.017951, -0.027140, -0.024987, -0.018107, -0.021475, -0.012884, -0.004600, -0.009233, -0.004027, 0.002032, 0.005763, 0.006970, 0.019603
#*# 	  -0.008146, -0.013991, -0.009552, -0.002603, -0.009222, -0.000854, -0.001674, -0.014617, 0.002383, -0.008740, -0.020404, -0.002957, -0.014099, -0.026045, -0.004336, -0.020909, -0.007216, 0.006072, -0.014579, -0.000213, 0.012345, 0.010003, 0.018402, 0.021043, 0.028138
#*# 	  -0.008445, 0.000326, 0.000149, 0.001594, 0.003823, 0.007625, 0.004384, -0.001156, -0.000090, -0.003502, -0.004810, -0.003995, -0.010721, -0.007611, -0.002310, -0.006857, 0.000169, 0.008801, -0.000646, 0.007603, 0.012053, 0.019457, 0.022137, 0.024338, 0.036629
#*# 	  0.000606, 0.000679, -0.000991, 0.003069, 0.007533, 0.002251, 0.017997, 0.006249, -0.004232, 0.011595, 0.000398, -0.010882, 0.006490, -0.002734, -0.002442, 0.012563, -0.002635, 0.008693, 0.023032, 0.006280, 0.021148, 0.029157, 0.032936, 0.036924, 0.044817
#*# 	  -0.000037, 0.006279, 0.010354, 0.009931, 0.013738, 0.016528, 0.013105, 0.014923, 0.011422, 0.005955, 0.010074, 0.005081, 0.002967, 0.006307, -0.001075, 0.005960, 0.013690, 0.010559, 0.016542, 0.021128, 0.024118, 0.032544, 0.039304, 0.035877, 0.049346
#*# 	  0.009472, 0.007880, 0.012664, 0.008293, 0.013867, 0.016305, 0.008672, 0.023282, 0.014647, 0.005017, 0.020306, 0.010227, -0.002007, 0.015042, 0.005743, 0.009691, 0.023218, 0.008810, 0.021716, 0.035167, 0.025437, 0.037776, 0.041244, 0.044924, 0.052085
#*# 	  0.005872, 0.012429, 0.015024, 0.014869, 0.016497, 0.016009, 0.018560, 0.016395, 0.014255, 0.018709, 0.014359, 0.012729, 0.015997, 0.004865, 0.010993, 0.016849, 0.013134, 0.021314, 0.023402, 0.019978, 0.031815, 0.036247, 0.039157, 0.040935, 0.055797
#*# 	  0.010507, 0.010408, 0.011749, 0.017258, 0.008543, 0.016453, 0.014733, 0.007350, 0.021791, 0.015212, 0.005088, 0.021639, 0.010961, -0.000031, 0.018072, 0.012869, 0.016230, 0.031361, 0.013577, 0.026959, 0.036919, 0.037012, 0.041464, 0.044029, 0.052848
#*# 	  0.003261, 0.007356, 0.006842, 0.008669, 0.008161, 0.013443, 0.009843, 0.006728, 0.010730, 0.008904, 0.007512, 0.012013, -0.000484, 0.003752, 0.010072, 0.004444, 0.011983, 0.015360, 0.009716, 0.024624, 0.023794, 0.030347, 0.033135, 0.035769, 0.050093
#*# 	  0.010006, 0.003779, -0.002599, 0.002853, 0.004808, -0.003945, 0.000833, 0.000129, -0.004651, 0.007087, 0.000672, -0.011514, 0.005545, -0.006017, -0.014631, 0.007575, 0.004571, 0.010144, 0.022051, 0.010588, 0.019285, 0.025363, 0.028308, 0.033531, 0.045674
#*# 	  -0.013789, -0.009082, -0.008023, -0.008728, -0.001785, -0.003102, -0.006323, -0.005285, -0.006496, -0.007608, -0.004365, -0.016047, -0.012804, -0.006804, -0.016265, -0.005610, -0.001806, -0.003955, 0.012178, 0.008181, 0.008136, 0.019191, 0.022592, 0.026189, 0.041205
#*# 	  -0.018538, -0.019869, -0.018249, -0.019209, -0.014709, -0.003956, -0.018144, -0.012344, -0.012950, -0.021200, -0.007731, -0.017629, -0.029218, -0.010372, -0.019567, -0.020894, 0.001078, -0.000637, 0.001968, 0.010670, 0.005257, 0.015385, 0.020459, 0.023805, 0.037900
#*# 	  -0.031925, -0.025870, -0.025809, -0.023816, -0.020310, -0.021848, -0.018084, -0.022346, -0.021888, -0.018465, -0.028825, -0.026869, -0.022360, -0.035028, -0.024709, -0.017933, -0.019242, 0.001001, -0.003259, -0.008037, 0.007882, 0.008766, 0.015840, 0.020555, 0.034705
#*# 	  -0.026703, -0.029062, -0.031623, -0.026809, -0.033915, -0.025619, -0.021829, -0.033762, -0.027140, -0.030127, -0.039369, -0.025238, -0.032606, -0.039778, -0.022078, -0.024905, -0.022249, -0.003523, -0.012605, -0.002428, 0.005359, 0.006223, 0.014081, 0.019650, 0.030954
#*# 	  -0.040090, -0.039593, -0.039980, -0.039270, -0.040064, -0.031754, -0.035807, -0.036753, -0.032211, -0.039172, -0.040171, -0.038886, -0.048584, -0.043073, -0.038213, -0.040055, -0.019940, -0.019143, -0.020943, -0.002794, -0.005115, -0.000578, 0.008366, 0.013931, 0.026545
#*# 	  -0.041527, -0.047680, -0.048216, -0.048376, -0.046020, -0.048243, -0.042395, -0.040055, -0.048130, -0.044530, -0.044729, -0.048914, -0.042921, -0.045706, -0.049657, -0.035605, -0.032666, -0.027846, -0.012111, -0.015807, -0.010159, -0.001878, 0.002663, 0.009712, 0.021443
#*# 	  -0.064192, -0.061809, -0.061623, -0.063615, -0.057237, -0.057079, -0.055157, -0.049735, -0.056202, -0.054152, -0.050011, -0.067167, -0.061945, -0.053819, -0.066594, -0.054148, -0.045687, -0.047990, -0.029710, -0.032288, -0.037367, -0.016341, -0.015774, -0.004627, 0.019710
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3856315955046634,
#*# 	  1.704784316189037,
#*# 	  0.7555972902416769,
#*# 	  0.36667543624615445,
#*# 	  0.434303362806249,
#*# 	  0.4349327754326395,
#*# 	  -0.2874792938435709,
#*# 	  -0.38445860153829553,
#*# 	  0.31308406285770046,
#*# 	  0.2807313674313839
#*# model_domain = 3.1061274065710475e-07,3.327710933345885e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 71.318711
#*# model_offset = 0.00000
