# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 79.8
shaper_type_x: mzv
shaper_freq_y: 80.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.077363, -0.069499, -0.063768, -0.053508, -0.047678, -0.041472, -0.044122, -0.048566, -0.052806, -0.056314, -0.061226, -0.066036, -0.069352, -0.074075, -0.076728, -0.075591, -0.074828, -0.073549, -0.080196, -0.077479, -0.076019, -0.082325, -0.085190, -0.083049, -0.068100
#*# 	  -0.071673, -0.061909, -0.052431, -0.043327, -0.033179, -0.028690, -0.030240, -0.035427, -0.041961, -0.047011, -0.053212, -0.058090, -0.062034, -0.067038, -0.068496, -0.067758, -0.065790, -0.065636, -0.067506, -0.070160, -0.074088, -0.076548, -0.078258, -0.074994, -0.062352
#*# 	  -0.065485, -0.056163, -0.047239, -0.037120, -0.026421, -0.020822, -0.022011, -0.028763, -0.035924, -0.040659, -0.046069, -0.051472, -0.057189, -0.061129, -0.063437, -0.061196, -0.058494, -0.057192, -0.057512, -0.060898, -0.063642, -0.064395, -0.072214, -0.068664, -0.050155
#*# 	  -0.060719, -0.053415, -0.044584, -0.035512, -0.024795, -0.019022, -0.019491, -0.026096, -0.040561, -0.034922, -0.040546, -0.045984, -0.052050, -0.056486, -0.058867, -0.056222, -0.053709, -0.053029, -0.053981, -0.056757, -0.060406, -0.060236, -0.065482, -0.063695, -0.048995
#*# 	  -0.057412, -0.050531, -0.041478, -0.035413, -0.028309, -0.023342, -0.022164, -0.024886, -0.027415, -0.031046, -0.036819, -0.041041, -0.046780, -0.051842, -0.053901, -0.051396, -0.048864, -0.046727, -0.047983, -0.048558, -0.051416, -0.054668, -0.058689, -0.059710, -0.038417
#*# 	  -0.055630, -0.048722, -0.042307, -0.036326, -0.030303, -0.025507, -0.013698, -0.024847, -0.025462, -0.028399, -0.033450, -0.039356, -0.044689, -0.050982, -0.053712, -0.051811, -0.049252, -0.046448, -0.047549, -0.048451, -0.048979, -0.064802, -0.052756, -0.038052, -0.037577
#*# 	  -0.054215, -0.046743, -0.041066, -0.036875, -0.032449, -0.027445, -0.025040, -0.024295, -0.022994, -0.024318, -0.028395, -0.033876, -0.040106, -0.044999, -0.047109, -0.046137, -0.043741, -0.041491, -0.040091, -0.041458, -0.043550, -0.045274, -0.050420, -0.049327, -0.023709
#*# 	  -0.053799, -0.045769, -0.041621, -0.037275, -0.032786, -0.026532, -0.024412, -0.021996, -0.020506, -0.022075, -0.027172, -0.031788, -0.036626, -0.042277, -0.044099, -0.042212, -0.039383, -0.037346, -0.036882, -0.037337, -0.037823, -0.036444, -0.040471, -0.040948, -0.021913
#*# 	  -0.050476, -0.042218, -0.037491, -0.035062, -0.028907, -0.022504, -0.019880, -0.017684, -0.015899, -0.015451, -0.018188, -0.021697, -0.025850, -0.030205, -0.032838, -0.032259, -0.029028, -0.026527, -0.027842, -0.028727, -0.029032, -0.031289, -0.030854, -0.031159, -0.012616
#*# 	  -0.048478, -0.041864, -0.038298, -0.033188, -0.026286, -0.021135, -0.017918, -0.017299, -0.014918, -0.013631, -0.015180, -0.017463, -0.020733, -0.024794, -0.027901, -0.026347, -0.024835, -0.023872, -0.024149, -0.027021, -0.026636, -0.023266, -0.027059, -0.027706, -0.006123
#*# 	  -0.045731, -0.038040, -0.031265, -0.028565, -0.023083, -0.016626, -0.014318, -0.014945, -0.012729, -0.010141, -0.009718, -0.011383, -0.013785, -0.016925, -0.018749, -0.017247, -0.015250, -0.015580, -0.021794, -0.017209, -0.017916, -0.017658, -0.016794, -0.017134, -0.003047
#*# 	  -0.043229, -0.035706, -0.029553, -0.026185, -0.018970, -0.013217, -0.010695, -0.010374, -0.007808, -0.007074, -0.007395, -0.008824, -0.011757, -0.014757, -0.016448, -0.015016, -0.014295, -0.015287, -0.016107, -0.017868, -0.015212, -0.011257, -0.012085, -0.012001, 0.008514
#*# 	  -0.041319, -0.031589, -0.025011, -0.021112, -0.015100, -0.008587, -0.006402, -0.006192, -0.004748, -0.003224, -0.003620, -0.004979, -0.006699, -0.011040, -0.013117, -0.011162, -0.009250, -0.008302, -0.007549, -0.008970, -0.007529, -0.006233, -0.008669, -0.006387, 0.009946
#*# 	  -0.044293, -0.036525, -0.029275, -0.023737, -0.016663, -0.009034, -0.005707, -0.004551, -0.002969, -0.003031, -0.003827, -0.005041, -0.007878, -0.011800, -0.014717, -0.015038, -0.014793, -0.011820, -0.013236, -0.012472, -0.007586, -0.005861, -0.005205, -0.006423, 0.013283
#*# 	  -0.046351, -0.035789, -0.027463, -0.022652, -0.015611, -0.008900, -0.005238, -0.001779, -0.000298, 0.000182, 0.000100, -0.001086, -0.003007, -0.006958, -0.008637, -0.008967, -0.006507, -0.005733, -0.006044, -0.007752, -0.006570, -0.005852, -0.008347, -0.004805, 0.007480
#*# 	  -0.051064, -0.040765, -0.034156, -0.028629, -0.023376, -0.016627, 0.001018, -0.010084, -0.006966, -0.005733, -0.006450, -0.007165, -0.010315, -0.014298, -0.016907, -0.016883, -0.015602, -0.014777, -0.016005, -0.016369, -0.016687, -0.038972, -0.024541, -0.024819, -0.005909
#*# 	  -0.056213, -0.045048, -0.038577, -0.033733, -0.027835, -0.020057, -0.017042, -0.013631, -0.010186, -0.008478, -0.008586, -0.010420, -0.015169, -0.017465, -0.019059, -0.016676, -0.016217, -0.015610, -0.016696, -0.018990, -0.020446, -0.020877, -0.022932, -0.021216, -0.011171
#*# 	  -0.066456, -0.056238, -0.049674, -0.046497, -0.039912, -0.034441, -0.029980, -0.026379, -0.024964, -0.023611, -0.024325, -0.026738, -0.030115, -0.032381, -0.032934, -0.030898, -0.030911, -0.029138, -0.031677, -0.032767, -0.034135, -0.035582, -0.040454, -0.040727, -0.018358
#*# 	  -0.076778, -0.065525, -0.058668, -0.053872, -0.046070, -0.039495, -0.035635, -0.032819, -0.028801, -0.027505, -0.027616, -0.029235, -0.033387, -0.035513, -0.042912, -0.031742, -0.028912, -0.027027, -0.028898, -0.031885, -0.033413, -0.036458, -0.038632, -0.037862, -0.023111
#*# 	  -0.086816, -0.074643, -0.067529, -0.062067, -0.055543, -0.048848, -0.044254, -0.041040, -0.038118, -0.037581, -0.038344, -0.040022, -0.042018, -0.044095, -0.043345, -0.039992, -0.037279, -0.035354, -0.037874, -0.039527, -0.040913, -0.042060, -0.045783, -0.042195, -0.028930
#*# 	  -0.093678, -0.079763, -0.073345, -0.068207, -0.061753, -0.055757, -0.051612, -0.049165, -0.047111, -0.045652, -0.047288, -0.048759, -0.050353, -0.052494, -0.053237, -0.050163, -0.047007, -0.044807, -0.053190, -0.048757, -0.043288, -0.052816, -0.053734, -0.053142, -0.038294
#*# 	  -0.101778, -0.088722, -0.082131, -0.077213, -0.071157, -0.064305, -0.059522, -0.056304, -0.054252, -0.054312, -0.055653, -0.055768, -0.058038, -0.060228, -0.061716, -0.058763, -0.056802, -0.055447, -0.054450, -0.056283, -0.056452, -0.058370, -0.059935, -0.055597, -0.043047
#*# 	  -0.106484, -0.095833, -0.089602, -0.085538, -0.079686, -0.073529, -0.070243, -0.066951, -0.063927, -0.062916, -0.064705, -0.068161, -0.071815, -0.072563, -0.071951, -0.068614, -0.066252, -0.065763, -0.064277, -0.064401, -0.065495, -0.067186, -0.068627, -0.067358, -0.053736
#*# 	  -0.117117, -0.105849, -0.100685, -0.095386, -0.088568, -0.082692, -0.079175, -0.075692, -0.073704, -0.073256, -0.066707, -0.074663, -0.077993, -0.079036, -0.080001, -0.076721, -0.072465, -0.071820, -0.070031, -0.069959, -0.070611, -0.072259, -0.074416, -0.072181, -0.059634
#*# 	  -0.132562, -0.123746, -0.116928, -0.112448, -0.106893, -0.100641, -0.096371, -0.093705, -0.090544, -0.087350, -0.087388, -0.088681, -0.090468, -0.093582, -0.093750, -0.092372, -0.089481, -0.086762, -0.084439, -0.083947, -0.084752, -0.084821, -0.087159, -0.083089, -0.069169
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	  1.7354079221972734,
#*# 	  0.7630322078872325,
#*# 	  0.3972884925633777,
#*# 	  0.37849463200726147,
#*# 	  0.3169570227532607,
#*# 	  -0.2360704257340257,
#*# 	  -0.2840356980838786,
#*# 	  0.2759119913545306,
#*# 	  0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = -0.41000
