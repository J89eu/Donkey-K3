[include moonraker_obico_macros.cfg]
# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 74.2
shaper_type_x: mzv
shaper_freq_y: 75.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.038238, -0.037591, -0.032452, -0.026401, -0.019232, -0.020535, -0.016195, -0.013430, -0.017426, -0.019927, -0.022447, -0.026541, -0.031236, -0.036898, -0.037916, -0.036837, -0.037843, -0.033138, -0.036931, -0.040546, -0.044186, -0.041357, -0.041128, -0.037164, -0.022324
#*# 	  -0.039159, -0.032712, -0.026172, -0.021270, -0.015053, -0.011044, -0.008952, -0.009346, -0.009818, -0.011640, -0.014799, -0.018894, -0.025536, -0.029789, -0.031203, -0.030211, -0.028415, -0.026613, -0.029217, -0.032117, -0.036661, -0.042380, -0.037976, -0.035319, -0.018650
#*# 	  -0.039232, -0.030943, -0.025154, -0.018453, -0.011769, -0.006907, -0.005207, -0.004698, -0.004653, -0.005546, -0.009520, -0.015477, -0.020996, -0.023026, -0.029240, -0.025456, -0.021742, -0.021277, -0.021500, -0.023999, -0.030012, -0.035897, -0.031716, -0.026354, -0.011518
#*# 	  -0.035608, -0.028904, -0.021826, -0.015022, -0.009463, -0.005274, -0.002854, 0.000154, -0.004202, -0.003039, -0.005296, -0.010685, -0.017169, -0.022777, -0.025731, -0.023837, -0.021685, -0.018548, -0.019492, -0.021578, -0.026043, -0.026922, -0.034115, -0.026341, -0.012777
#*# 	  -0.039522, -0.030405, -0.022291, -0.016875, -0.011170, -0.003817, -0.005315, -0.001875, 0.000981, -0.005963, -0.006061, -0.009011, -0.018306, -0.023691, -0.027013, -0.025516, -0.023187, -0.020409, -0.018543, -0.020319, -0.022046, -0.033362, -0.027019, -0.025410, -0.012466
#*# 	  -0.039507, -0.031945, -0.024769, -0.019535, -0.014315, -0.009602, -0.006422, -0.005091, -0.003978, -0.003721, -0.009833, -0.012781, -0.019815, -0.026107, -0.028646, -0.028713, -0.025932, -0.022061, -0.021151, -0.023861, -0.023294, -0.029624, -0.031358, -0.025818, -0.015302
#*# 	  -0.044715, -0.036195, -0.030264, -0.023482, -0.020913, -0.014956, -0.010944, -0.008482, -0.007215, -0.007169, -0.011142, -0.015909, -0.021740, -0.028004, -0.031680, -0.031518, -0.028627, -0.024235, -0.023480, -0.024669, -0.025109, -0.031834, -0.033504, -0.025207, -0.014951
#*# 	  -0.046016, -0.038405, -0.032690, -0.027280, -0.023663, -0.017577, -0.013749, -0.010730, -0.009516, -0.009836, -0.010810, -0.014482, -0.021309, -0.025396, -0.028615, -0.028671, -0.026160, -0.024050, -0.022404, -0.024555, -0.025908, -0.032867, -0.031012, -0.024660, -0.014469
#*# 	  -0.046773, -0.040682, -0.035863, -0.030581, -0.024998, -0.019368, -0.014806, -0.012286, -0.010677, -0.009276, -0.010513, -0.012697, -0.019218, -0.022475, -0.024458, -0.024793, -0.023278, -0.019977, -0.019064, -0.021775, -0.022324, -0.025250, -0.027494, -0.022752, -0.012696
#*# 	  -0.047681, -0.041438, -0.035287, -0.028526, -0.022965, -0.016429, -0.015628, -0.012403, -0.007547, -0.010809, -0.009214, -0.009968, -0.013333, -0.016482, -0.018566, -0.018323, -0.015993, -0.013979, -0.014116, -0.015613, -0.017344, -0.024169, -0.018336, -0.016685, -0.007063
#*# 	  -0.046649, -0.038426, -0.033527, -0.028520, -0.020605, -0.016778, -0.012619, -0.009932, -0.010319, -0.008230, -0.008746, -0.010008, -0.011706, -0.013361, -0.014436, -0.015090, -0.012615, -0.011026, -0.012223, -0.014817, -0.015390, -0.015976, -0.021848, -0.013699, -0.003513
#*# 	  -0.044344, -0.036523, -0.031056, -0.024619, -0.018645, -0.011730, -0.007882, -0.006197, -0.005006, -0.004219, -0.005317, -0.006583, -0.008956, -0.008664, -0.010346, -0.009952, -0.008565, -0.007514, -0.008812, -0.009775, -0.008857, -0.013295, -0.012504, -0.005478, 0.005503
#*# 	  -0.044969, -0.036912, -0.031455, -0.025645, -0.016883, -0.010727, -0.006080, -0.003288, -0.003297, -0.002968, -0.004319, -0.006683, -0.008415, -0.009623, -0.011162, -0.010290, -0.007898, -0.007686, -0.007983, -0.007183, -0.007371, -0.010986, -0.009986, -0.007309, 0.004699
#*# 	  -0.045653, -0.038534, -0.032090, -0.025365, -0.018389, -0.011119, -0.004980, -0.000132, -0.000818, -0.000554, -0.002485, -0.003574, -0.005731, -0.006011, -0.007874, -0.008398, -0.006428, -0.003126, -0.003423, -0.006042, -0.004164, -0.004522, -0.013527, -0.003952, 0.006798
#*# 	  -0.047738, -0.039381, -0.031834, -0.027064, -0.020275, -0.012177, -0.007021, -0.004578, -0.001264, -0.000082, 0.000388, -0.000694, -0.003252, -0.004930, -0.006424, -0.006074, -0.006572, -0.004517, -0.004797, -0.006418, -0.007458, -0.012380, -0.013415, -0.006794, 0.004937
#*# 	  -0.052414, -0.042853, -0.038124, -0.030194, -0.024468, -0.017923, -0.011942, -0.008412, -0.003501, -0.002293, -0.003648, -0.003520, -0.002981, -0.005558, -0.007275, -0.007008, -0.006523, -0.005295, -0.006409, -0.009232, -0.009278, -0.014489, -0.014465, -0.010512, 0.002361
#*# 	  -0.056717, -0.048352, -0.041996, -0.036112, -0.030009, -0.022776, -0.016813, -0.012572, -0.009454, -0.008794, -0.008467, -0.008983, -0.009748, -0.010768, -0.012208, -0.012027, -0.009988, -0.011062, -0.012162, -0.014428, -0.015548, -0.023250, -0.019834, -0.014668, -0.001094
#*# 	  -0.067259, -0.058553, -0.052856, -0.045669, -0.039034, -0.031098, -0.024949, -0.019803, -0.016688, -0.017802, -0.017059, -0.017305, -0.019812, -0.018193, -0.018877, -0.018732, -0.016957, -0.016952, -0.017478, -0.020100, -0.021556, -0.028276, -0.023556, -0.019895, -0.005701
#*# 	  -0.076131, -0.067511, -0.059362, -0.052474, -0.044904, -0.038452, -0.031933, -0.026721, -0.024717, -0.023773, -0.023258, -0.026070, -0.026003, -0.025853, -0.023883, -0.021973, -0.021401, -0.020863, -0.021033, -0.024891, -0.029317, -0.029861, -0.027327, -0.022685, -0.008855
#*# 	  -0.082140, -0.073649, -0.066962, -0.059508, -0.051969, -0.044005, -0.037167, -0.031638, -0.027906, -0.028297, -0.029910, -0.029730, -0.030199, -0.030202, -0.031268, -0.030283, -0.026700, -0.024702, -0.027700, -0.028140, -0.034556, -0.032469, -0.027658, -0.024022, -0.010910
#*# 	  -0.087052, -0.077323, -0.069248, -0.063660, -0.056554, -0.048149, -0.041190, -0.036374, -0.033414, -0.032387, -0.033529, -0.033676, -0.034359, -0.035476, -0.037181, -0.034990, -0.032843, -0.032582, -0.031551, -0.033456, -0.034192, -0.034871, -0.030597, -0.024510, -0.013691
#*# 	  -0.086375, -0.078569, -0.071716, -0.065061, -0.057569, -0.049740, -0.043031, -0.038115, -0.034893, -0.033206, -0.035339, -0.035603, -0.037000, -0.038473, -0.041188, -0.040959, -0.038458, -0.037977, -0.037724, -0.035354, -0.035053, -0.032672, -0.030092, -0.027046, -0.013569
#*# 	  -0.089343, -0.080496, -0.074513, -0.067589, -0.060258, -0.052784, -0.046033, -0.040047, -0.037197, -0.035418, -0.036798, -0.037760, -0.040281, -0.042254, -0.046018, -0.044905, -0.041738, -0.043520, -0.037830, -0.033905, -0.031703, -0.030164, -0.028707, -0.022026, -0.010678
#*# 	  -0.095328, -0.086183, -0.079844, -0.072602, -0.065572, -0.057834, -0.050573, -0.045570, -0.040806, -0.040192, -0.041076, -0.042202, -0.046431, -0.049667, -0.050843, -0.050945, -0.048077, -0.044274, -0.038190, -0.036239, -0.034580, -0.031914, -0.026942, -0.023455, -0.012246
#*# 	  -0.102255, -0.091742, -0.085703, -0.079434, -0.072027, -0.063093, -0.055037, -0.049336, -0.047673, -0.045838, -0.047342, -0.049239, -0.052656, -0.054192, -0.055758, -0.053319, -0.049656, -0.046348, -0.043867, -0.040586, -0.036529, -0.036713, -0.031499, -0.022752, -0.012071
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3856232970581277,
#*# 	1.7043595232719484,
#*# 	0.7482036273345796,
#*# 	0.2921440097493287,
#*# 	0.38485236488684393,
#*# 	0.6916775148234287,
#*# 	-0.15665704786161627,
#*# 	-0.6858971426015216,
#*# 	0.24449396338121415,
#*# 	0.40598073634933096
#*# model_domain = 3.097766416886859e-07,3.3287737663318636e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 72.358329
#*# model_offset = 0.00000
