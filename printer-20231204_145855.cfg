[include moonraker_obico_macros.cfg]
# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 79.8
shaper_type_x: mzv
shaper_freq_y: 80.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.059666, -0.056239, -0.050319, -0.043701, -0.035956, -0.033684, -0.034605, -0.039714, -0.045465, -0.049619, -0.055184, -0.059103, -0.063049, -0.065952, -0.068484, -0.067070, -0.064395, -0.063036, -0.063307, -0.065726, -0.064669, -0.063523, -0.063097, -0.059853, -0.044671
#*# 	  -0.054538, -0.048931, -0.042138, -0.035620, -0.026355, -0.016595, -0.022455, -0.029057, -0.041986, -0.040367, -0.040250, -0.056977, -0.054994, -0.053323, -0.064018, -0.057387, -0.050659, -0.057884, -0.054050, -0.049818, -0.061899, -0.058247, -0.051324, -0.048332, -0.034374
#*# 	  -0.049705, -0.043114, -0.036843, -0.026670, -0.018649, -0.014069, -0.015452, -0.021565, -0.027977, -0.033131, -0.038887, -0.043834, -0.048739, -0.053829, -0.052227, -0.050614, -0.049786, -0.045797, -0.046819, -0.048093, -0.049312, -0.051942, -0.050464, -0.047993, -0.031444
#*# 	  -0.045179, -0.038069, -0.036118, -0.027025, -0.014723, -0.018865, -0.014235, -0.013729, -0.031078, -0.028186, -0.027675, -0.045949, -0.044222, -0.054486, -0.050177, -0.043076, -0.047939, -0.041742, -0.035901, -0.047044, -0.043934, -0.038887, -0.054670, -0.040268, -0.025286
#*# 	  -0.041363, -0.036553, -0.033501, -0.026012, -0.018973, -0.015901, -0.014774, -0.018218, -0.020728, -0.024839, -0.029441, -0.035671, -0.041120, -0.045648, -0.048618, -0.045073, -0.040912, -0.037282, -0.038195, -0.039896, -0.040548, -0.043439, -0.042893, -0.041603, -0.026227
#*# 	  -0.040579, -0.033036, -0.032262, -0.028424, -0.024381, -0.017652, -0.013140, -0.023604, -0.020827, -0.017005, -0.034303, -0.033099, -0.033594, -0.047521, -0.045963, -0.041372, -0.043868, -0.036874, -0.031774, -0.035053, -0.035185, -0.043133, -0.043057, -0.034450, -0.022216
#*# 	  -0.039428, -0.033819, -0.030836, -0.027817, -0.024149, -0.020993, -0.018669, -0.020821, -0.020148, -0.018439, -0.027008, -0.031309, -0.038165, -0.041220, -0.045314, -0.043708, -0.038112, -0.034987, -0.034003, -0.034738, -0.036061, -0.037840, -0.044677, -0.035470, -0.019754
#*# 	  -0.037433, -0.034215, -0.028920, -0.021812, -0.026680, -0.019161, -0.011777, -0.022677, -0.016758, -0.023299, -0.021608, -0.019251, -0.035710, -0.033838, -0.032260, -0.041361, -0.032511, -0.025328, -0.030857, -0.026756, -0.025912, -0.034140, -0.037522, -0.025903, -0.013513
#*# 	  -0.035755, -0.030511, -0.028523, -0.024877, -0.021504, -0.016643, -0.014891, -0.016110, -0.015415, -0.013891, -0.017418, -0.020474, -0.022692, -0.027660, -0.031112, -0.028782, -0.026056, -0.021752, -0.022098, -0.025023, -0.024772, -0.026844, -0.033649, -0.025895, -0.012576
#*# 	  -0.029988, -0.024775, -0.018489, -0.022449, -0.014402, -0.007030, -0.015572, -0.010724, -0.002450, -0.017683, -0.013202, -0.007127, -0.022921, -0.018156, -0.014143, -0.020370, -0.016606, -0.018903, -0.015153, -0.011153, -0.016839, -0.020880, -0.014676, -0.028507, 0.001172
#*# 	  -0.027553, -0.020192, -0.018075, -0.014834, -0.011228, -0.008128, -0.006319, -0.006497, -0.008822, -0.007199, -0.007151, -0.011578, -0.013159, -0.015402, -0.017068, -0.016191, -0.013111, -0.011564, -0.012314, -0.014195, -0.014308, -0.014436, -0.016060, -0.014923, 0.003324
#*# 	  -0.024836, -0.015987, -0.004511, -0.006245, -0.002972, -0.006586, 0.001458, 0.006048, -0.008568, -0.001854, 0.003818, -0.014307, -0.007629, -0.002339, -0.019635, -0.010297, -0.000494, -0.011249, -0.004570, -0.001477, -0.004721, -0.004780, -0.009067, -0.008979, 0.018872
#*# 	  -0.022228, -0.012670, -0.006719, -0.005262, -0.000396, 0.003638, 0.004912, 0.002819, -0.000145, 0.001155, 0.001244, -0.005768, -0.005175, -0.008811, -0.011960, -0.010585, -0.007776, -0.005007, -0.004783, -0.006385, -0.006829, -0.004673, -0.002814, -0.005257, 0.015653
#*# 	  -0.021471, -0.006112, -0.012893, -0.003187, 0.006385, -0.000990, 0.007511, 0.015506, -0.000715, 0.007046, 0.012334, 0.002241, -0.000465, -0.012744, -0.008324, -0.000193, -0.008977, -0.000572, 0.002781, 0.001916, 0.001296, 0.003681, 0.001757, -0.002260, 0.024965
#*# 	  -0.023133, -0.010461, -0.006857, -0.003165, 0.001837, 0.006975, 0.005991, 0.007246, 0.009519, 0.007187, 0.006660, 0.007000, 0.000619, -0.002286, -0.003484, -0.005603, -0.001173, 0.001161, 0.002806, 0.002570, 0.004087, 0.004801, 0.007154, -0.001779, 0.019038
#*# 	  -0.021808, -0.018951, -0.009667, 0.000735, -0.007017, 0.001978, 0.011909, -0.002275, 0.006639, 0.016087, -0.001464, 0.004975, 0.008229, -0.009487, -0.007176, -0.000091, -0.008922, -0.000131, -0.000615, 0.001892, 0.004791, 0.002275, -0.004954, 0.012435, 0.022011
#*# 	  -0.031067, -0.018090, -0.015297, -0.011604, -0.007256, -0.003994, -0.001188, -0.001844, -0.000080, 0.001910, -0.000796, -0.002880, -0.005438, -0.008651, -0.009572, -0.009849, -0.007010, -0.004702, -0.003549, -0.004054, -0.002584, -0.003651, -0.009190, -0.000137, 0.009819
#*# 	  -0.036261, -0.031417, -0.022704, -0.012417, -0.021731, -0.010922, -0.000772, -0.007350, -0.007104, -0.013675, -0.008855, -0.003209, -0.019533, -0.015203, -0.010194, -0.022925, -0.012548, -0.004118, -0.011854, -0.008548, -0.002408, -0.009890, -0.013460, 0.003268, 0.012785
#*# 	  -0.046192, -0.036017, -0.031917, -0.027834, -0.023355, -0.019927, -0.017944, -0.018235, -0.015764, -0.013826, -0.019945, -0.020501, -0.023425, -0.025657, -0.025574, -0.021247, -0.018388, -0.014786, -0.015218, -0.017244, -0.016473, -0.014055, -0.024237, -0.014954, 0.002204
#*# 	  -0.051117, -0.042186, -0.032945, -0.039816, -0.030790, -0.020391, -0.032101, -0.024004, -0.017480, -0.028542, -0.025155, -0.019830, -0.035339, -0.032502, -0.038458, -0.029222, -0.018855, -0.022423, -0.020836, -0.017315, -0.026638, -0.024043, -0.012856, -0.018837, 0.003602
#*# 	  -0.058222, -0.049548, -0.046835, -0.042239, -0.036642, -0.034673, -0.032163, -0.030732, -0.029950, -0.029871, -0.031739, -0.035350, -0.036979, -0.038450, -0.040861, -0.037416, -0.031482, -0.028983, -0.028791, -0.030597, -0.031824, -0.026785, -0.039926, -0.020606, -0.004900
#*# 	  -0.062061, -0.053784, -0.046038, -0.047001, -0.043210, -0.045584, -0.037799, -0.031717, -0.040702, -0.035153, -0.032165, -0.046183, -0.043681, -0.039613, -0.053039, -0.045017, -0.034369, -0.038455, -0.035479, -0.032281, -0.038753, -0.037456, -0.045124, -0.019599, -0.001697
#*# 	  -0.068812, -0.060378, -0.058242, -0.055593, -0.049172, -0.045454, -0.046941, -0.043427, -0.042186, -0.042607, -0.044241, -0.049314, -0.050703, -0.051714, -0.057802, -0.052533, -0.049403, -0.044118, -0.042416, -0.041330, -0.045566, -0.045583, -0.034097, -0.025591, -0.008865
#*# 	  -0.076082, -0.066668, -0.067732, -0.061695, -0.055717, -0.058541, -0.052587, -0.049232, -0.050286, -0.050221, -0.053359, -0.056852, -0.056466, -0.065947, -0.063531, -0.056548, -0.059431, -0.053032, -0.046149, -0.055626, -0.050426, -0.042858, -0.046513, -0.029844, -0.014381
#*# 	  -0.088492, -0.079384, -0.076355, -0.073209, -0.070110, -0.064574, -0.067823, -0.063431, -0.060058, -0.063649, -0.064305, -0.064650, -0.074902, -0.071967, -0.066850, -0.073927, -0.064758, -0.057136, -0.057960, -0.055410, -0.054598, -0.050430, -0.045429, -0.035639, -0.020946
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	  1.7354079221972734,
#*# 	  0.7630322078872325,
#*# 	  0.3972884925633777,
#*# 	  0.37849463200726147,
#*# 	  0.3169570227532607,
#*# 	  -0.2360704257340257,
#*# 	  -0.2840356980838786,
#*# 	  0.2759119913545306,
#*# 	  0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = -0.35000
