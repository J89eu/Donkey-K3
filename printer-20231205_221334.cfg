[include moonraker_obico_macros.cfg]
# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 66.8
shaper_type_x: mzv
shaper_freq_y: 68.0
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.070066, -0.063783, -0.057521, -0.049798, -0.041843, -0.039814, -0.039197, -0.042850, -0.046645, -0.049263, -0.054205, -0.058101, -0.060535, -0.063970, -0.063236, -0.065395, -0.063798, -0.061519, -0.063886, -0.064782, -0.067429, -0.069680, -0.072640, -0.074722, -0.067402
#*# 	  -0.064313, -0.054940, -0.048468, -0.040840, -0.029890, -0.025280, -0.026687, -0.031843, -0.036332, -0.040088, -0.045645, -0.040000, -0.053838, -0.065622, -0.050045, -0.056347, -0.062416, -0.046817, -0.055274, -0.060557, -0.055671, -0.059369, -0.060763, -0.065334, -0.061345
#*# 	  -0.061411, -0.048497, -0.045698, -0.035001, -0.024712, -0.019525, -0.020811, -0.025731, -0.030112, -0.034340, -0.039723, -0.044415, -0.049304, -0.052175, -0.054014, -0.053651, -0.047808, -0.047259, -0.046999, -0.048129, -0.051520, -0.054375, -0.057336, -0.057435, -0.054978
#*# 	  -0.052715, -0.041897, -0.037201, -0.029627, -0.020547, -0.014437, -0.015846, -0.019215, -0.023170, -0.026854, -0.031796, -0.037083, -0.032369, -0.046794, -0.058989, -0.037068, -0.044026, -0.049249, -0.033617, -0.042188, -0.045162, -0.043757, -0.045347, -0.046906, -0.046900
#*# 	  -0.051003, -0.040013, -0.035278, -0.028023, -0.022938, -0.017348, -0.016511, -0.018287, -0.020618, -0.023987, -0.028522, -0.033689, -0.038868, -0.044009, -0.052602, -0.039221, -0.042436, -0.041527, -0.035080, -0.038300, -0.038421, -0.041562, -0.044931, -0.046198, -0.044030
#*# 	  -0.049797, -0.039880, -0.034605, -0.029381, -0.023523, -0.018880, -0.018084, -0.017921, -0.018385, -0.020951, -0.026268, -0.030320, -0.035950, -0.032699, -0.044247, -0.052296, -0.031953, -0.037143, -0.042666, -0.030794, -0.034520, -0.035905, -0.038059, -0.044435, -0.042039
#*# 	  -0.049285, -0.038085, -0.033810, -0.030631, -0.026355, -0.023004, -0.020092, -0.018390, -0.018092, -0.020193, -0.024153, -0.023138, -0.032904, -0.038821, -0.037301, -0.041878, -0.042229, -0.030504, -0.032734, -0.031736, -0.033336, -0.034741, -0.037790, -0.040807, -0.031553
#*# 	  -0.047075, -0.040137, -0.036944, -0.028479, -0.024154, -0.019790, -0.017868, -0.016890, -0.014959, -0.015704, -0.018705, -0.022865, -0.027497, -0.032098, -0.024587, -0.034684, -0.042682, -0.018808, -0.027440, -0.028208, -0.023400, -0.024678, -0.027374, -0.038141, -0.027723
#*# 	  -0.047065, -0.035341, -0.032251, -0.027686, -0.023484, -0.018102, -0.015753, -0.014113, -0.013604, -0.013070, -0.014283, -0.015872, -0.019517, -0.019352, -0.028214, -0.031990, -0.017934, -0.021519, -0.022157, -0.020460, -0.020544, -0.022276, -0.024870, -0.024803, -0.024794
#*# 	  -0.040659, -0.033408, -0.027630, -0.030398, -0.018048, -0.014404, -0.012566, -0.011715, -0.010655, -0.009444, -0.009768, -0.009861, -0.013083, -0.017240, -0.019406, -0.008302, -0.016343, -0.029111, -0.005847, -0.017225, -0.019961, -0.012142, -0.015245, -0.018007, -0.015293
#*# 	  -0.039324, -0.027780, -0.024119, -0.019990, -0.014458, -0.010746, -0.009607, -0.009529, -0.009087, -0.007236, -0.006708, -0.007478, -0.002498, -0.011765, -0.019828, -0.006602, -0.011200, -0.018560, -0.013313, -0.014175, -0.009269, -0.005733, -0.011235, -0.013862, -0.010067
#*# 	  -0.032280, -0.029727, -0.016112, -0.015922, -0.016613, -0.005620, -0.002756, -0.002790, -0.002618, -0.001570, -0.002674, -0.003137, -0.005118, -0.008225, -0.009172, -0.017898, 0.003864, -0.008448, -0.022893, 0.000509, -0.004329, -0.000086, -0.002428, -0.001905, 0.000399
#*# 	  -0.036576, -0.022428, -0.019272, -0.014303, -0.007517, -0.002013, -0.000431, -0.000343, -0.000169, 0.000122, -0.000767, 0.004995, -0.003367, -0.014575, -0.004142, -0.008141, -0.014812, 0.000082, -0.010035, -0.006651, -0.002269, -0.000734, -0.001282, -0.003496, 0.000174
#*# 	  -0.033519, -0.022182, -0.022204, -0.009696, -0.008447, -0.009587, 0.001214, 0.002884, 0.003885, 0.003684, 0.004124, 0.002816, -0.000578, -0.004311, 0.003479, -0.005727, -0.015735, 0.008100, -0.008328, -0.012761, 0.002233, 0.004964, 0.003279, 0.002362, 0.008085
#*# 	  -0.040229, -0.022598, -0.018716, -0.014684, -0.008958, -0.003250, 0.000201, 0.002240, 0.003902, 0.003882, 0.010369, 0.002863, -0.005757, 0.002710, -0.006690, -0.012957, 0.001076, -0.006679, -0.018655, -0.005149, -0.000132, -0.000704, -0.003056, -0.003444, -0.001965
#*# 	  -0.036496, -0.020771, -0.020548, -0.023145, -0.007134, -0.007795, -0.012578, -0.000867, 0.002007, 0.003854, 0.003471, 0.002501, -0.000345, -0.004043, -0.006526, 0.003129, -0.007269, -0.020075, 0.004202, -0.005224, -0.003219, 0.001289, -0.000408, -0.000859, 0.000001
#*# 	  -0.051009, -0.035424, -0.029540, -0.025205, -0.020101, -0.015326, -0.012048, -0.008881, -0.005999, -0.000255, -0.005992, -0.011716, -0.004949, -0.012975, -0.019159, -0.010951, -0.013677, -0.021767, -0.016724, -0.014044, -0.010808, -0.010491, -0.013219, -0.013813, -0.011208
#*# 	  -0.051815, -0.046652, -0.029300, -0.032433, -0.034233, -0.014335, -0.019419, -0.024805, -0.013399, -0.011915, -0.012818, -0.014327, -0.017710, -0.020575, -0.021980, -0.021256, -0.007437, -0.017661, -0.028858, -0.009053, -0.013877, -0.015199, -0.013763, -0.014177, -0.012881
#*# 	  -0.069092, -0.053204, -0.048123, -0.042836, -0.036624, -0.031853, -0.027993, -0.025273, -0.018594, -0.022205, -0.029350, -0.020161, -0.028172, -0.035771, -0.025537, -0.028558, -0.034090, -0.026512, -0.027058, -0.025205, -0.022321, -0.023158, -0.025789, -0.025208, -0.021114
#*# 	  -0.071272, -0.058877, -0.058917, -0.046065, -0.044292, -0.045625, -0.026541, -0.032342, -0.039526, -0.029704, -0.030013, -0.031792, -0.034948, -0.037847, -0.039360, -0.036094, -0.033691, -0.019329, -0.031037, -0.034189, -0.022904, -0.024692, -0.025722, -0.024367, -0.020714
#*# 	  -0.085878, -0.069858, -0.064005, -0.058726, -0.052610, -0.046829, -0.043464, -0.036531, -0.038776, -0.044094, -0.034246, -0.042762, -0.051344, -0.041016, -0.047408, -0.052239, -0.042047, -0.039197, -0.038349, -0.037165, -0.033473, -0.035495, -0.036386, -0.034233, -0.032431
#*# 	  -0.081201, -0.066564, -0.066752, -0.065959, -0.053788, -0.052610, -0.056530, -0.038191, -0.043772, -0.043304, -0.044985, -0.046862, -0.049326, -0.051827, -0.052390, -0.050776, -0.047030, -0.043465, -0.032394, -0.038144, -0.035618, -0.035160, -0.035222, -0.033346, -0.030018
#*# 	  -0.093707, -0.078641, -0.074009, -0.069369, -0.063522, -0.058178, -0.051905, -0.053267, -0.050607, -0.045925, -0.052640, -0.061752, -0.050839, -0.060056, -0.067285, -0.059388, -0.055110, -0.052060, -0.051139, -0.045955, -0.042128, -0.042656, -0.042748, -0.040633, -0.036053
#*# 	  -0.096203, -0.088418, -0.081562, -0.079666, -0.077095, -0.067864, -0.066118, -0.067945, -0.055724, -0.060755, -0.062885, -0.064934, -0.066577, -0.068635, -0.069049, -0.068103, -0.064135, -0.062582, -0.058705, -0.051775, -0.050404, -0.050872, -0.049348, -0.047955, -0.042221
#*# 	  -0.111636, -0.097568, -0.094673, -0.090461, -0.084306, -0.079652, -0.077136, -0.072708, -0.068252, -0.070092, -0.074718, -0.068223, -0.075545, -0.083421, -0.079554, -0.076717, -0.073743, -0.069899, -0.066298, -0.064640, -0.063453, -0.062582, -0.060011, -0.053008, -0.036786
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4187140295105232,
#*# 	  1.7354079221972734,
#*# 	  0.7630322078872325,
#*# 	  0.3972884925633777,
#*# 	  0.37849463200726147,
#*# 	  0.3169570227532607,
#*# 	  -0.2360704257340257,
#*# 	  -0.2840356980838786,
#*# 	  0.2759119913545306,
#*# 	  0.2363071748638434
#*# model_domain = 3.1463124780775087e-07,3.3299457387568525e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 39.796365
#*# model_offset = -0.37000
