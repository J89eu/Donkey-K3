# STM32F446 with a "32KiB bootloader" and a "12MHz crystal" clock reference.
# Printer may explode.

[include extras/*]
[include config_backup.cfg]
[auto_speed]

# Uncomment when using a pico pi with ADXL 
#[include pico_adxl.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2D003F001551303432323631-if00

[printer]
kinematics: cartesian
max_velocity: 1200
max_accel_to_decel: 25000  
max_accel: 25000
max_z_velocity: 75 
max_z_accel: 2000
square_corner_velocity: 50

[input_shaper]
shaper_freq_x: 80.8
shaper_type_x: mzv
shaper_freq_y: 79.8
shaper_type_y: mzv

[heater_bed]
heater_pin: PA3

sensor_pin: PF3
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 150
#control: watermark
#max_delta: 0.5

# Mesh Bed Settings
[bed_mesh]
speed: 425
horizontal_move_z: 1
mesh_min: 20,25
mesh_max: 150, 155
probe_count: 25,25
fade_start: 1.0
fade_end: 10
split_delta_z: .01
move_check_distance: 3.0
mesh_pps: 0,0
algorithm: bicubic
bicubic_tension: 0.2
#relative_reference_index: 12  # ^^^because were measuring the offset from the nozzle switch to the bed using the center of the bed, the equation to find the location = (probe point count)/2-1

# Z Tilt Bed Adjustment settings
[z_tilt]
#3 Z Motors
z_positions: 
    -74.0, -18.0    # Front Left
    76.0,  217.0    # Rear
    226.0, -18.0    # Front Right
points:
    41.5, 20          # Front Left
    97.5, 160        # Rear
    171.5, 20         # Front Right
speed: 500
horizontal_move_z: 5.0
retries: 8
retry_tolerance: 0.005

# Motor and Heater Idle Timeout
[idle_timeout]
# only turn off motors and heaters if the printer is not paused
gcode:
    {% if not (printer.pause_resume.is_paused) %}
        TURN_OFF_HEATERS
        M84
        SET_TEMPERATURE_FAN_TARGET TEMPERATURE_FAN=chamber TARGET=0

    {% endif %}
timeout: 1200

# Enable stuff
[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: true

[pause_resume]

[display_status]

[respond]

[exclude_object]

[temperature_sensor pi]
sensor_type: temperature_host

[temperature_sensor octopus]
sensor_type: temperature_mcu

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 52.222
#*# pid_ki = 2.959
#*# pid_kd = 230.431
#*# control = pid
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.021062, -0.029030, -0.027174, -0.019602, -0.012010, -0.022555, -0.017222, -0.013635, -0.029944, -0.025914, -0.023287, -0.043260, -0.039580, -0.034670, -0.052212, -0.042633, -0.040971, -0.039658, -0.039269, -0.044815, -0.036867, -0.029852, -0.033219, -0.025026, -0.011754
#*# 	-0.023767, -0.024220, -0.018712, -0.011940, -0.013038, -0.009176, -0.007127, -0.018928, -0.016067, -0.013831, -0.030173, -0.029881, -0.029234, -0.038824, -0.040348, -0.043335, -0.035864, -0.026854, -0.036348, -0.031051, -0.026477, -0.036204, -0.027352, -0.021243, -0.009760
#*# 	-0.021359, -0.016583, -0.013512, -0.010608, -0.004657, -0.002005, -0.004557, -0.007725, -0.015642, -0.014691, -0.015708, -0.029417, -0.029958, -0.029805, -0.038620, -0.031344, -0.025735, -0.031625, -0.025675, -0.020604, -0.035765, -0.029577, -0.025209, -0.017898, -0.004082
#*# 	-0.012920, -0.012026, -0.007278, -0.001098, -0.001101, 0.003078, 0.004700, 0.000050, -0.002795, -0.013210, -0.013452, -0.013255, -0.029985, -0.030032, -0.026372, -0.031150, -0.023840, -0.015935, -0.024030, -0.020429, -0.016652, -0.030612, -0.023341, -0.013991, 0.000536
#*# 	-0.014325, -0.007854, -0.005331, -0.003041, 0.001866, 0.004302, 0.001275, 0.002085, 0.002394, -0.009697, -0.011951, -0.016789, -0.023360, -0.028455, -0.034045, -0.027736, -0.022170, -0.021628, -0.017917, -0.015065, -0.028216, -0.023918, -0.016065, -0.014735, -0.003412
#*# 	-0.009918, -0.005843, -0.003391, -0.003548, 0.004498, 0.009411, 0.001563, 0.006164, 0.010838, -0.007536, -0.006420, -0.005428, -0.023377, -0.023449, -0.021375, -0.031599, -0.022202, -0.011552, -0.013534, -0.013575, -0.029746, -0.021024, -0.009593, -0.013453, 0.001026
#*# 	-0.011820, -0.007707, -0.006497, -0.003736, -0.000879, 0.002130, 0.001289, 0.003186, 0.004029, -0.005783, -0.008331, -0.009973, -0.021709, -0.025686, -0.025240, -0.029433, -0.023208, -0.016364, -0.012896, -0.013421, -0.027687, -0.022449, -0.010471, -0.008600, 0.000445
#*# 	-0.011941, -0.006910, -0.001954, -0.007742, -0.001249, 0.004886, -0.002223, 0.002711, 0.006117, -0.008847, -0.006582, -0.005036, -0.016782, -0.022248, -0.033630, -0.024716, -0.016001, -0.022077, -0.011526, -0.006278, -0.023522, -0.018204, -0.006353, -0.009605, 0.004539
#*# 	-0.012238, -0.008702, -0.007467, -0.006804, -0.001693, 0.000992, 0.001529, 0.000653, -0.000173, -0.004261, -0.005720, -0.006423, -0.016638, -0.020080, -0.019684, -0.023550, -0.017644, -0.012439, -0.009944, -0.010188, -0.009236, -0.022405, -0.017301, -0.007103, 0.001740
#*# 	-0.010933, -0.005118, -0.001407, -0.001883, 0.001684, 0.003581, 0.003374, 0.003738, -0.002165, -0.000285, 0.002774, -0.010142, -0.008567, -0.005920, -0.021295, -0.013509, -0.005716, -0.017075, -0.006881, -0.000366, -0.013696, -0.010948, -0.012813, -0.002858, 0.010752
#*# 	-0.008455, -0.004586, -0.002253, -0.000401, 0.003496, 0.004900, 0.004877, 0.000908, 0.001457, 0.000637, -0.003845, -0.003871, -0.005211, -0.010099, -0.013066, -0.013622, -0.010274, -0.005737, -0.005433, -0.005905, -0.004802, -0.014544, -0.009677, 0.000311, 0.010345
#*# 	-0.008173, -0.001007, -0.003797, 0.005180, 0.013883, 0.004144, 0.009204, 0.014341, -0.001028, 0.002719, 0.006592, -0.008094, -0.004346, -0.000204, -0.009953, -0.007032, 0.001498, -0.003915, -0.002099, -0.008979, -0.004991, 0.006332, -0.012649, 0.003923, 0.017537
#*# 	-0.005033, -0.000114, 0.000463, 0.003033, 0.007984, 0.009800, 0.010354, 0.008341, 0.006749, 0.005417, -0.000282, -0.002229, -0.003598, -0.010642, -0.010485, -0.007340, -0.006957, -0.005300, -0.001441, -0.002325, -0.002811, -0.006451, -0.003197, 0.005308, 0.015241
#*# 	-0.007543, -0.001142, -0.003398, 0.002652, 0.011043, 0.006201, 0.009843, 0.016020, 0.007832, 0.005167, 0.002476, 0.000611, -0.003095, -0.012792, -0.010721, -0.002990, -0.010777, -0.004760, 0.002762, -0.010314, -0.004288, 0.006340, -0.010937, 0.005144, 0.017026
#*# 	-0.007833, -0.002861, -0.001565, 0.000672, 0.004180, 0.006870, 0.006354, 0.009071, 0.007285, 0.005175, 0.000351, 0.000951, 0.000050, -0.008423, -0.010051, -0.008865, -0.006920, -0.005195, -0.002832, -0.006328, -0.007123, -0.001683, -0.012113, 0.000447, 0.013620
#*# 	-0.013894, -0.007821, -0.006189, -0.004421, -0.000697, 0.000104, 0.001621, -0.003324, 0.003298, 0.010068, -0.006501, -0.003287, 0.000366, -0.015979, -0.013727, -0.006762, -0.016200, -0.010141, -0.004072, -0.009278, -0.011215, -0.011689, -0.012775, -0.002977, 0.011452
#*# 	-0.020481, -0.014293, -0.013898, -0.011415, -0.007466, -0.006169, -0.005806, -0.005174, -0.006561, -0.006207, -0.006129, -0.015400, -0.015521, -0.014998, -0.021819, -0.020996, -0.020256, -0.017316, -0.014352, -0.020523, -0.021442, -0.015063, -0.026812, -0.013178, 0.005371
#*# 	-0.030412, -0.026451, -0.023119, -0.017535, -0.019844, -0.013192, -0.009001, -0.018903, -0.012761, -0.008499, -0.024462, -0.021384, -0.020008, -0.027785, -0.032052, -0.029400, -0.026130, -0.024688, -0.028876, -0.024657, -0.021857, -0.034272, -0.030267, -0.019780, -0.004117
#*# 	-0.040365, -0.033489, -0.031050, -0.028950, -0.023686, -0.023068, -0.021947, -0.020366, -0.026447, -0.024690, -0.026886, -0.035618, -0.035970, -0.036045, -0.044273, -0.037411, -0.032616, -0.034286, -0.032477, -0.030210, -0.038582, -0.037238, -0.048586, -0.026716, -0.004403
#*# 	-0.046117, -0.046731, -0.040143, -0.032273, -0.037554, -0.030825, -0.025017, -0.030065, -0.031683, -0.034066, -0.037443, -0.034033, -0.050273, -0.047022, -0.042663, -0.053149, -0.042261, -0.033908, -0.043787, -0.040499, -0.035224, -0.044938, -0.042353, -0.030507, -0.010683
#*# 	-0.054642, -0.048806, -0.045300, -0.045714, -0.039388, -0.034447, -0.040934, -0.039680, -0.033725, -0.038888, -0.042710, -0.052160, -0.051725, -0.050649, -0.060546, -0.054478, -0.049120, -0.051994, -0.046774, -0.041814, -0.057075, -0.049679, -0.038573, -0.034334, -0.012328
#*# 	-0.061708, -0.055249, -0.053825, -0.051226, -0.046497, -0.044962, -0.049925, -0.044700, -0.037684, -0.050270, -0.046527, -0.045796, -0.062137, -0.059448, -0.062459, -0.063102, -0.058930, -0.047931, -0.052838, -0.052208, -0.053418, -0.052654, -0.041758, -0.038187, -0.019129
#*# 	-0.062809, -0.061054, -0.060008, -0.062567, -0.058895, -0.051067, -0.057797, -0.050906, -0.045728, -0.051111, -0.049165, -0.051579, -0.062079, -0.062745, -0.062724, -0.065905, -0.063363, -0.064225, -0.060195, -0.052967, -0.063596, -0.055274, -0.047556, -0.044365, -0.026462
#*# 	-0.072889, -0.067629, -0.064094, -0.069401, -0.061267, -0.059714, -0.062602, -0.057874, -0.046200, -0.053070, -0.045600, -0.047643, -0.059911, -0.066721, -0.073963, -0.074318, -0.070880, -0.075127, -0.067961, -0.063204, -0.070892, -0.062917, -0.057578, -0.052613, -0.036995
#*# 	-0.084537, -0.081440, -0.079211, -0.075699, -0.074166, -0.068387, -0.065716, -0.063352, -0.057438, -0.047791, -0.042620, -0.044214, -0.063192, -0.068902, -0.076599, -0.090697, -0.085008, -0.076697, -0.081457, -0.073597, -0.068162, -0.068722, -0.063992, -0.062751, -0.048013
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = direct
#*# y_count = 25
#*# mesh_y_pps = 0
#*# min_y = 25.0
#*# x_count = 25
#*# max_y = 155.0
#*# mesh_x_pps = 0
#*# max_x = 150.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3766518413708795,
#*# 	  1.684744896255117,
#*# 	  0.7349079428225701,
#*# 	  0.3801398621559266,
#*# 	  0.498505296339972,
#*# 	  0.453642779418076,
#*# 	  -0.363777386794551,
#*# 	  -0.4367886904817681,
#*# 	  0.35337731369073305,
#*# 	  0.3191073627103792
#*# model_domain = 3.096966099882909e-07,3.3272525023491613e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 74.993861
#*# model_offset = 0.00000
